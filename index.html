<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="generator" content="Asciidoctor 0.1.4">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>OACensus Documentation</title>
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
article, aside, details, figcaption, figure, footer, header, hgroup, main, nav, section, summary { display: block; }
audio, canvas, video { display: inline-block; }
audio:not([controls]) { display: none; height: 0; }
[hidden] { display: none; }
html { background: #fff; color: #000; font-family: sans-serif; -ms-text-size-adjust: 100%; -webkit-text-size-adjust: 100%; }
body { margin: 0; }
a:focus { outline: thin dotted; }
a:active, a:hover { outline: 0; }
h1 { font-size: 2em; margin: 0.67em 0; }
abbr[title] { border-bottom: 1px dotted; }
b, strong { font-weight: bold; }
dfn { font-style: italic; }
hr { -moz-box-sizing: content-box; box-sizing: content-box; height: 0; }
mark { background: #ff0; color: #000; }
code, kbd, pre, samp { font-family: monospace, serif; font-size: 1em; }
pre { white-space: pre-wrap; }
q { quotes: "\201C" "\201D" "\2018" "\2019"; }
small { font-size: 80%; }
sub, sup { font-size: 75%; line-height: 0; position: relative; vertical-align: baseline; }
sup { top: -0.5em; }
sub { bottom: -0.25em; }
img { border: 0; }
svg:not(:root) { overflow: hidden; }
figure { margin: 0; }
fieldset { border: 1px solid #c0c0c0; margin: 0 2px; padding: 0.35em 0.625em 0.75em; }
legend { border: 0; padding: 0; }
button, input, select, textarea { font-family: inherit; font-size: 100%; margin: 0; }
button, input { line-height: normal; }
button, select { text-transform: none; }
button, html input[type="button"], input[type="reset"], input[type="submit"] { -webkit-appearance: button; cursor: pointer; }
button[disabled], html input[disabled] { cursor: default; }
input[type="checkbox"], input[type="radio"] { box-sizing: border-box; padding: 0; }
input[type="search"] { -webkit-appearance: textfield; -moz-box-sizing: content-box; -webkit-box-sizing: content-box; box-sizing: content-box; }
input[type="search"]::-webkit-search-cancel-button, input[type="search"]::-webkit-search-decoration { -webkit-appearance: none; }
button::-moz-focus-inner, input::-moz-focus-inner { border: 0; padding: 0; }
textarea { overflow: auto; vertical-align: top; }
table { border-collapse: collapse; border-spacing: 0; }
*, *:before, *:after { -moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; }
html, body { font-size: 100%; }
body { background: white; color: #222222; padding: 0; margin: 0; font-family: "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif; font-weight: normal; font-style: normal; line-height: 1; position: relative; cursor: auto; }
a:hover { cursor: pointer; }
a:focus { outline: none; }
img, object, embed { max-width: 100%; height: auto; }
object, embed { height: 100%; }
img { -ms-interpolation-mode: bicubic; }
#map_canvas img, #map_canvas embed, #map_canvas object, .map_canvas img, .map_canvas embed, .map_canvas object { max-width: none !important; }
.left { float: left !important; }
.right { float: right !important; }
.text-left { text-align: left !important; }
.text-right { text-align: right !important; }
.text-center { text-align: center !important; }
.text-justify { text-align: justify !important; }
.hide { display: none; }
.antialiased, body { -webkit-font-smoothing: antialiased; }
img { display: inline-block; vertical-align: middle; }
textarea { height: auto; min-height: 50px; }
select { width: 100%; }
p.lead, .paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p { font-size: 1.21875em; line-height: 1.6; }
.subheader, #content #toctitle, .admonitionblock td.content > .title, .exampleblock > .title, .imageblock > .title, .videoblock > .title, .listingblock > .title, .literalblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, .sidebarblock > .title, .tableblock > .title, .verseblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title, .tableblock > caption { line-height: 1.4; color: #7a2518; font-weight: 300; margin-top: 0.2em; margin-bottom: 0.5em; }
div, dl, dt, dd, ul, ol, li, h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6, pre, form, p, blockquote, th, td { margin: 0; padding: 0; direction: ltr; }
a { color: #005498; text-decoration: underline; line-height: inherit; }
a:hover, a:focus { color: #00467f; }
a img { border: none; }
p { font-family: inherit; font-weight: normal; font-size: 1em; line-height: 1.6; margin-bottom: 1.25em; text-rendering: optimizeLegibility; }
p aside { font-size: 0.875em; line-height: 1.35; font-style: italic; }
h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { font-family: Georgia, "URW Bookman L", Helvetica, Arial, sans-serif; font-weight: normal; font-style: normal; color: #ba3925; text-rendering: optimizeLegibility; margin-top: 1em; margin-bottom: 0.5em; line-height: 1.2125em; }
h1 small, h2 small, h3 small, #toctitle small, .sidebarblock > .content > .title small, h4 small, h5 small, h6 small { font-size: 60%; color: #e99b8f; line-height: 0; }
h1 { font-size: 2.125em; }
h2 { font-size: 1.6875em; }
h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.375em; }
h4 { font-size: 1.125em; }
h5 { font-size: 1.125em; }
h6 { font-size: 1em; }
hr { border: solid #dddddd; border-width: 1px 0 0; clear: both; margin: 1.25em 0 1.1875em; height: 0; }
em, i { font-style: italic; line-height: inherit; }
strong, b { font-weight: bold; line-height: inherit; }
small { font-size: 60%; line-height: inherit; }
code { font-family: Consolas, "Liberation Mono", Courier, monospace; font-weight: normal; color: #6d180b; }
ul, ol, dl { font-size: 1em; line-height: 1.6; margin-bottom: 1.25em; list-style-position: outside; font-family: inherit; }
ul, ol { margin-left: 1.5em; }
ul li ul, ul li ol { margin-left: 1.25em; margin-bottom: 0; font-size: 1em; }
ul.square li ul, ul.circle li ul, ul.disc li ul { list-style: inherit; }
ul.square { list-style-type: square; }
ul.circle { list-style-type: circle; }
ul.disc { list-style-type: disc; }
ul.no-bullet { list-style: none; }
ol li ul, ol li ol { margin-left: 1.25em; margin-bottom: 0; }
dl dt { margin-bottom: 0.3125em; font-weight: bold; }
dl dd { margin-bottom: 1.25em; }
abbr, acronym { text-transform: uppercase; font-size: 90%; color: #222222; border-bottom: 1px dotted #dddddd; cursor: help; }
abbr { text-transform: none; }
blockquote { margin: 0 0 1.25em; padding: 0.5625em 1.25em 0 1.1875em; border-left: 1px solid #dddddd; }
blockquote cite { display: block; font-size: inherit; color: #555555; }
blockquote cite:before { content: "\2014 \0020"; }
blockquote cite a, blockquote cite a:visited { color: #555555; }
blockquote, blockquote p { line-height: 1.6; color: #6f6f6f; }
.vcard { display: inline-block; margin: 0 0 1.25em 0; border: 1px solid #dddddd; padding: 0.625em 0.75em; }
.vcard li { margin: 0; display: block; }
.vcard .fn { font-weight: bold; font-size: 0.9375em; }
.vevent .summary { font-weight: bold; }
.vevent abbr { cursor: auto; text-decoration: none; font-weight: bold; border: none; padding: 0 0.0625em; }
@media only screen and (min-width: 768px) { h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { line-height: 1.4; }
  h1 { font-size: 2.75em; }
  h2 { font-size: 2.3125em; }
  h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.6875em; }
  h4 { font-size: 1.4375em; } }
.print-only { display: none !important; }
@media print { * { background: transparent !important; color: #000 !important; box-shadow: none !important; text-shadow: none !important; }
  a, a:visited { text-decoration: underline; }
  a[href]:after { content: " (" attr(href) ")"; }
  abbr[title]:after { content: " (" attr(title) ")"; }
  .ir a:after, a[href^="javascript:"]:after, a[href^="#"]:after { content: ""; }
  pre, blockquote { border: 1px solid #999; page-break-inside: avoid; }
  thead { display: table-header-group; }
  tr, img { page-break-inside: avoid; }
  img { max-width: 100% !important; }
  @page { margin: 0.5cm; }
  p, h2, h3, #toctitle, .sidebarblock > .content > .title { orphans: 3; widows: 3; }
  h2, h3, #toctitle, .sidebarblock > .content > .title { page-break-after: avoid; }
  .hide-on-print { display: none !important; }
  .print-only { display: block !important; }
  .hide-for-print { display: none !important; }
  .show-for-print { display: inherit !important; } }
table { background: white; margin-bottom: 1.25em; border: solid 1px #dddddd; }
table thead, table tfoot { background: whitesmoke; font-weight: bold; }
table thead tr th, table thead tr td, table tfoot tr th, table tfoot tr td { padding: 0.5em 0.625em 0.625em; font-size: inherit; color: #222222; text-align: left; }
table tr th, table tr td { padding: 0.5625em 0.625em; font-size: inherit; color: #222222; }
table tr.even, table tr.alt, table tr:nth-of-type(even) { background: #f9f9f9; }
table thead tr th, table tfoot tr th, table tbody tr td, table tr td, table tfoot tr td { display: table-cell; line-height: 1.6; }
.clearfix:before, .clearfix:after, .float-group:before, .float-group:after { content: " "; display: table; }
.clearfix:after, .float-group:after { clear: both; }
*:not(pre) > code { font-size: 0.9375em; padding: 1px 3px 0; white-space: nowrap; background-color: #f2f2f2; border: 1px solid #cccccc; -webkit-border-radius: 4px; border-radius: 4px; text-shadow: none; }
pre, pre > code { line-height: 1.4; color: inherit; font-family: Consolas, "Liberation Mono", Courier, monospace; font-weight: normal; }
kbd.keyseq { color: #555555; }
kbd:not(.keyseq) { display: inline-block; color: #222222; font-size: 0.75em; line-height: 1.4; background-color: #F7F7F7; border: 1px solid #ccc; -webkit-border-radius: 3px; border-radius: 3px; -webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 2px white inset; box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 2px white inset; margin: -0.15em 0.15em 0 0.15em; padding: 0.2em 0.6em 0.2em 0.5em; vertical-align: middle; white-space: nowrap; }
kbd kbd:first-child { margin-left: 0; }
kbd kbd:last-child { margin-right: 0; }
.menuseq, .menu { color: #090909; }
p a > code:hover { color: #561309; }
#header, #content, #footnotes, #footer { width: 100%; margin-left: auto; margin-right: auto; margin-top: 0; margin-bottom: 0; max-width: 62.5em; *zoom: 1; position: relative; padding-left: 0.9375em; padding-right: 0.9375em; }
#header:before, #header:after, #content:before, #content:after, #footnotes:before, #footnotes:after, #footer:before, #footer:after { content: " "; display: table; }
#header:after, #content:after, #footnotes:after, #footer:after { clear: both; }
#header { margin-bottom: 2.5em; }
#header > h1 { color: black; font-weight: normal; border-bottom: 1px solid #dddddd; margin-bottom: -28px; padding-bottom: 32px; }
#header span { color: #6f6f6f; }
#header #revnumber { text-transform: capitalize; }
#header br { display: none; }
#header br + span { padding-left: 3px; }
#header br + span:before { content: "\2013 \0020"; }
#header br + span.author { padding-left: 0; }
#header br + span.author:before { content: ", "; }
#toc { border-bottom: 3px double #ebebeb; padding-bottom: 1.25em; }
#toc > ul { margin-left: 0.25em; }
#toc ul.sectlevel0 > li > a { font-style: italic; }
#toc ul.sectlevel0 ul.sectlevel1 { margin-left: 0; margin-top: 0.5em; margin-bottom: 0.5em; }
#toc ul { list-style-type: none; }
#toctitle { color: #7a2518; }
@media only screen and (min-width: 1280px) { body.toc2 { padding-left: 20em; }
  #toc.toc2 { position: fixed; width: 20em; left: 0; top: 0; border-right: 1px solid #ebebeb; border-bottom: 0; z-index: 1000; padding: 1em; height: 100%; overflow: auto; }
  #toc.toc2 #toctitle { margin-top: 0; }
  #toc.toc2 > ul { font-size: .95em; }
  #toc.toc2 ul ul { margin-left: 0; padding-left: 1.25em; }
  #toc.toc2 ul.sectlevel0 ul.sectlevel1 { padding-left: 0; margin-top: 0.5em; margin-bottom: 0.5em; }
  body.toc2.toc-right { padding-left: 0; padding-right: 20em; }
  body.toc2.toc-right #toc.toc2 { border-right: 0; border-left: 1px solid #ebebeb; left: auto; right: 0; } }
#content #toc { border-style: solid; border-width: 1px; border-color: #d9d9d9; margin-bottom: 1.25em; padding: 1.25em; background: #f2f2f2; border-width: 0; -webkit-border-radius: 4px; border-radius: 4px; }
#content #toc > :first-child { margin-top: 0; }
#content #toc > :last-child { margin-bottom: 0; }
#content #toc a { text-decoration: none; }
#content #toctitle { font-weight: bold; font-family: "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif; font-size: 1em; padding-left: 0.125em; }
#footer { max-width: 100%; background-color: #222222; padding: 1.25em; }
#footer-text { color: #dddddd; line-height: 1.44; }
.sect1 { padding-bottom: 1.25em; }
.sect1 + .sect1 { border-top: 3px double #ebebeb; }
#content h1 > a.anchor, h2 > a.anchor, h3 > a.anchor, #toctitle > a.anchor, .sidebarblock > .content > .title > a.anchor, h4 > a.anchor, h5 > a.anchor, h6 > a.anchor { position: absolute; width: 1em; margin-left: -1em; display: block; text-decoration: none; visibility: hidden; text-align: center; font-weight: normal; }
#content h1 > a.anchor:before, h2 > a.anchor:before, h3 > a.anchor:before, #toctitle > a.anchor:before, .sidebarblock > .content > .title > a.anchor:before, h4 > a.anchor:before, h5 > a.anchor:before, h6 > a.anchor:before { content: '\00A7'; font-size: .85em; vertical-align: text-top; display: block; margin-top: 0.05em; }
#content h1:hover > a.anchor, #content h1 > a.anchor:hover, h2:hover > a.anchor, h2 > a.anchor:hover, h3:hover > a.anchor, #toctitle:hover > a.anchor, .sidebarblock > .content > .title:hover > a.anchor, h3 > a.anchor:hover, #toctitle > a.anchor:hover, .sidebarblock > .content > .title > a.anchor:hover, h4:hover > a.anchor, h4 > a.anchor:hover, h5:hover > a.anchor, h5 > a.anchor:hover, h6:hover > a.anchor, h6 > a.anchor:hover { visibility: visible; }
#content h1 > a.link, h2 > a.link, h3 > a.link, #toctitle > a.link, .sidebarblock > .content > .title > a.link, h4 > a.link, h5 > a.link, h6 > a.link { color: #ba3925; text-decoration: none; }
#content h1 > a.link:hover, h2 > a.link:hover, h3 > a.link:hover, #toctitle > a.link:hover, .sidebarblock > .content > .title > a.link:hover, h4 > a.link:hover, h5 > a.link:hover, h6 > a.link:hover { color: #a53221; }
.imageblock, .literalblock, .listingblock, .verseblock, .videoblock { margin-bottom: 1.25em; }
.admonitionblock td.content > .title, .exampleblock > .title, .imageblock > .title, .videoblock > .title, .listingblock > .title, .literalblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, .sidebarblock > .title, .tableblock > .title, .verseblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title { text-align: left; font-weight: bold; }
.tableblock > caption { text-align: left; font-weight: bold; white-space: nowrap; overflow: visible; max-width: 0; }
table.tableblock #preamble > .sectionbody > .paragraph:first-of-type p { font-size: inherit; }
.admonitionblock > table { border: 0; background: none; width: 100%; }
.admonitionblock > table td.icon { text-align: center; width: 80px; }
.admonitionblock > table td.icon img { max-width: none; }
.admonitionblock > table td.icon .title { font-weight: bold; text-transform: uppercase; }
.admonitionblock > table td.content { padding-left: 1.125em; padding-right: 1.25em; border-left: 1px solid #dddddd; color: #6f6f6f; }
.admonitionblock > table td.content > :last-child > :last-child { margin-bottom: 0; }
.exampleblock > .content { border-style: solid; border-width: 1px; border-color: #e6e6e6; margin-bottom: 1.25em; padding: 1.25em; background: white; -webkit-border-radius: 4px; border-radius: 4px; }
.exampleblock > .content > :first-child { margin-top: 0; }
.exampleblock > .content > :last-child { margin-bottom: 0; }
.exampleblock > .content h1, .exampleblock > .content h2, .exampleblock > .content h3, .exampleblock > .content #toctitle, .sidebarblock.exampleblock > .content > .title, .exampleblock > .content h4, .exampleblock > .content h5, .exampleblock > .content h6, .exampleblock > .content p { color: #333333; }
.exampleblock > .content h1, .exampleblock > .content h2, .exampleblock > .content h3, .exampleblock > .content #toctitle, .sidebarblock.exampleblock > .content > .title, .exampleblock > .content h4, .exampleblock > .content h5, .exampleblock > .content h6 { line-height: 1; margin-bottom: 0.625em; }
.exampleblock > .content h1.subheader, .exampleblock > .content h2.subheader, .exampleblock > .content h3.subheader, .exampleblock > .content .subheader#toctitle, .sidebarblock.exampleblock > .content > .subheader.title, .exampleblock > .content h4.subheader, .exampleblock > .content h5.subheader, .exampleblock > .content h6.subheader { line-height: 1.4; }
.exampleblock.result > .content { -webkit-box-shadow: 0 1px 8px #d9d9d9; box-shadow: 0 1px 8px #d9d9d9; }
.sidebarblock { border-style: solid; border-width: 1px; border-color: #d9d9d9; margin-bottom: 1.25em; padding: 1.25em; background: #f2f2f2; -webkit-border-radius: 4px; border-radius: 4px; }
.sidebarblock > :first-child { margin-top: 0; }
.sidebarblock > :last-child { margin-bottom: 0; }
.sidebarblock h1, .sidebarblock h2, .sidebarblock h3, .sidebarblock #toctitle, .sidebarblock > .content > .title, .sidebarblock h4, .sidebarblock h5, .sidebarblock h6, .sidebarblock p { color: #333333; }
.sidebarblock h1, .sidebarblock h2, .sidebarblock h3, .sidebarblock #toctitle, .sidebarblock > .content > .title, .sidebarblock h4, .sidebarblock h5, .sidebarblock h6 { line-height: 1; margin-bottom: 0.625em; }
.sidebarblock h1.subheader, .sidebarblock h2.subheader, .sidebarblock h3.subheader, .sidebarblock .subheader#toctitle, .sidebarblock > .content > .subheader.title, .sidebarblock h4.subheader, .sidebarblock h5.subheader, .sidebarblock h6.subheader { line-height: 1.4; }
.sidebarblock > .content > .title { color: #7a2518; margin-top: 0; line-height: 1.6; }
.exampleblock > .content > :last-child > :last-child, .exampleblock > .content .olist > ol > li:last-child > :last-child, .exampleblock > .content .ulist > ul > li:last-child > :last-child, .exampleblock > .content .qlist > ol > li:last-child > :last-child, .sidebarblock > .content > :last-child > :last-child, .sidebarblock > .content .olist > ol > li:last-child > :last-child, .sidebarblock > .content .ulist > ul > li:last-child > :last-child, .sidebarblock > .content .qlist > ol > li:last-child > :last-child { margin-bottom: 0; }
.literalblock > .content pre, .listingblock > .content pre { background: none; border-width: 1px 0; border-style: dotted; border-color: #bfbfbf; -webkit-border-radius: 4px; border-radius: 4px; padding: 0.75em 0.75em 0.5em 0.75em; word-wrap: break-word; }
.literalblock > .content pre.nowrap, .listingblock > .content pre.nowrap { overflow-x: auto; white-space: pre; word-wrap: normal; }
.literalblock > .content pre > code, .listingblock > .content pre > code { display: block; }
@media only screen { .literalblock > .content pre, .listingblock > .content pre { font-size: 0.8em; } }
@media only screen and (min-width: 768px) { .literalblock > .content pre, .listingblock > .content pre { font-size: 0.9em; } }
@media only screen and (min-width: 1280px) { .literalblock > .content pre, .listingblock > .content pre { font-size: 1em; } }
.listingblock > .content { position: relative; }
.listingblock:hover code[class*=" language-"]:before { text-transform: uppercase; font-size: 0.9em; color: #999; position: absolute; top: 0.375em; right: 0.375em; }
.listingblock:hover code.asciidoc:before { content: "asciidoc"; }
.listingblock:hover code.clojure:before { content: "clojure"; }
.listingblock:hover code.css:before { content: "css"; }
.listingblock:hover code.groovy:before { content: "groovy"; }
.listingblock:hover code.html:before { content: "html"; }
.listingblock:hover code.java:before { content: "java"; }
.listingblock:hover code.javascript:before { content: "javascript"; }
.listingblock:hover code.python:before { content: "python"; }
.listingblock:hover code.ruby:before { content: "ruby"; }
.listingblock:hover code.scss:before { content: "scss"; }
.listingblock:hover code.xml:before { content: "xml"; }
.listingblock:hover code.yaml:before { content: "yaml"; }
.listingblock.terminal pre .command:before { content: attr(data-prompt); padding-right: 0.5em; color: #999; }
.listingblock.terminal pre .command:not([data-prompt]):before { content: '$'; }
table.pyhltable { border: 0; margin-bottom: 0; }
table.pyhltable td { vertical-align: top; padding-top: 0; padding-bottom: 0; }
table.pyhltable td.code { padding-left: .75em; padding-right: 0; }
.highlight.pygments .lineno, table.pyhltable td:not(.code) { color: #999; padding-left: 0; padding-right: .5em; border-right: 1px solid #dddddd; }
.highlight.pygments .lineno { display: inline-block; margin-right: .25em; }
table.pyhltable .linenodiv { background-color: transparent !important; padding-right: 0 !important; }
.quoteblock { margin: 0 0 1.25em; padding: 0.5625em 1.25em 0 1.1875em; border-left: 1px solid #dddddd; }
.quoteblock blockquote { margin: 0 0 1.25em 0; padding: 0 0 0.5625em 0; border: 0; }
.quoteblock blockquote > .paragraph:last-child p { margin-bottom: 0; }
.quoteblock .attribution { margin-top: -.25em; padding-bottom: 0.5625em; font-size: inherit; color: #555555; }
.quoteblock .attribution br { display: none; }
.quoteblock .attribution cite { display: block; margin-bottom: 0.625em; }
table thead th, table tfoot th { font-weight: bold; }
table.tableblock.grid-all { border-collapse: separate; border-spacing: 1px; -webkit-border-radius: 4px; border-radius: 4px; border-top: 1px solid #dddddd; border-bottom: 1px solid #dddddd; }
table.tableblock.frame-topbot, table.tableblock.frame-none { border-left: 0; border-right: 0; }
table.tableblock.frame-sides, table.tableblock.frame-none { border-top: 0; border-bottom: 0; }
table.tableblock td .paragraph:last-child p, table.tableblock td > p:last-child { margin-bottom: 0; }
th.tableblock.halign-left, td.tableblock.halign-left { text-align: left; }
th.tableblock.halign-right, td.tableblock.halign-right { text-align: right; }
th.tableblock.halign-center, td.tableblock.halign-center { text-align: center; }
th.tableblock.valign-top, td.tableblock.valign-top { vertical-align: top; }
th.tableblock.valign-bottom, td.tableblock.valign-bottom { vertical-align: bottom; }
th.tableblock.valign-middle, td.tableblock.valign-middle { vertical-align: middle; }
p.tableblock.header { color: #222222; font-weight: bold; }
td > div.verse { white-space: pre; }
ol { margin-left: 1.75em; }
ul li ol { margin-left: 1.5em; }
dl dd { margin-left: 1.125em; }
dl dd:last-child, dl dd:last-child > :last-child { margin-bottom: 0; }
ol > li p, ul > li p, ul dd, ol dd, .olist .olist, .ulist .ulist, .ulist .olist, .olist .ulist { margin-bottom: 0.625em; }
ul.unstyled, ol.unnumbered, ul.checklist, ul.none { list-style-type: none; }
ul.unstyled, ol.unnumbered, ul.checklist { margin-left: 0.625em; }
ul.checklist li > p:first-child > i[class^="icon-check"]:first-child, ul.checklist li > p:first-child > input[type="checkbox"]:first-child { margin-right: 0.25em; }
ul.checklist li > p:first-child > input[type="checkbox"]:first-child { position: relative; top: 1px; }
ul.inline { margin: 0 auto 0.625em auto; margin-left: -1.375em; margin-right: 0; padding: 0; list-style: none; overflow: hidden; }
ul.inline > li { list-style: none; float: left; margin-left: 1.375em; display: block; }
ul.inline > li > * { display: block; }
.unstyled dl dt { font-weight: normal; font-style: normal; }
ol.arabic { list-style-type: decimal; }
ol.decimal { list-style-type: decimal-leading-zero; }
ol.loweralpha { list-style-type: lower-alpha; }
ol.upperalpha { list-style-type: upper-alpha; }
ol.lowerroman { list-style-type: lower-roman; }
ol.upperroman { list-style-type: upper-roman; }
ol.lowergreek { list-style-type: lower-greek; }
.hdlist > table, .colist > table { border: 0; background: none; }
.hdlist > table > tbody > tr, .colist > table > tbody > tr { background: none; }
td.hdlist1 { padding-right: .8em; font-weight: bold; }
td.hdlist1, td.hdlist2 { vertical-align: top; }
.literalblock + .colist, .listingblock + .colist { margin-top: -0.5em; }
.colist > table tr > td:first-of-type { padding: 0 .8em; line-height: 1; }
.colist > table tr > td:last-of-type { padding: 0.25em 0; }
.qanda > ol > li > p > em:only-child { color: #00467f; }
.thumb, .th { line-height: 0; display: inline-block; border: solid 4px white; -webkit-box-shadow: 0 0 0 1px #dddddd; box-shadow: 0 0 0 1px #dddddd; }
.imageblock.left, .imageblock[style*="float: left"] { margin: 0.25em 0.625em 1.25em 0; }
.imageblock.right, .imageblock[style*="float: right"] { margin: 0.25em 0 1.25em 0.625em; }
.imageblock > .title { margin-bottom: 0; }
.imageblock.thumb, .imageblock.th { border-width: 6px; }
.imageblock.thumb > .title, .imageblock.th > .title { padding: 0 0.125em; }
.image.left, .image.right { margin-top: 0.25em; margin-bottom: 0.25em; display: inline-block; line-height: 0; }
.image.left { margin-right: 0.625em; }
.image.right { margin-left: 0.625em; }
a.image { text-decoration: none; }
span.footnote, span.footnoteref { vertical-align: super; font-size: 0.875em; }
span.footnote a, span.footnoteref a { text-decoration: none; }
#footnotes { padding-top: 0.75em; padding-bottom: 0.75em; margin-bottom: 0.625em; }
#footnotes hr { width: 20%; min-width: 6.25em; margin: -.25em 0 .75em 0; border-width: 1px 0 0 0; }
#footnotes .footnote { padding: 0 0.375em; line-height: 1.3; font-size: 0.875em; margin-left: 1.2em; text-indent: -1.2em; margin-bottom: .2em; }
#footnotes .footnote a:first-of-type { font-weight: bold; text-decoration: none; }
#footnotes .footnote:last-of-type { margin-bottom: 0; }
#content #footnotes { margin-top: -0.625em; margin-bottom: 0; padding: 0.75em 0; }
.gist .file-data > table { border: none; background: #fff; width: 100%; margin-bottom: 0; }
.gist .file-data > table td.line-data { width: 99%; }
div.unbreakable { page-break-inside: avoid; }
.big { font-size: larger; }
.small { font-size: smaller; }
.underline { text-decoration: underline; }
.overline { text-decoration: overline; }
.line-through { text-decoration: line-through; }
.aqua { color: #00bfbf; }
.aqua-background { background-color: #00fafa; }
.black { color: black; }
.black-background { background-color: black; }
.blue { color: #0000bf; }
.blue-background { background-color: #0000fa; }
.fuchsia { color: #bf00bf; }
.fuchsia-background { background-color: #fa00fa; }
.gray { color: #606060; }
.gray-background { background-color: #7d7d7d; }
.green { color: #006000; }
.green-background { background-color: #007d00; }
.lime { color: #00bf00; }
.lime-background { background-color: #00fa00; }
.maroon { color: #600000; }
.maroon-background { background-color: #7d0000; }
.navy { color: #000060; }
.navy-background { background-color: #00007d; }
.olive { color: #606000; }
.olive-background { background-color: #7d7d00; }
.purple { color: #600060; }
.purple-background { background-color: #7d007d; }
.red { color: #bf0000; }
.red-background { background-color: #fa0000; }
.silver { color: #909090; }
.silver-background { background-color: #bcbcbc; }
.teal { color: #006060; }
.teal-background { background-color: #007d7d; }
.white { color: #bfbfbf; }
.white-background { background-color: #fafafa; }
.yellow { color: #bfbf00; }
.yellow-background { background-color: #fafa00; }
span.icon > [class^="icon-"], span.icon > [class*=" icon-"] { cursor: default; }
.admonitionblock td.icon [class^="icon-"]:before { font-size: 2.5em; text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5); cursor: default; }
.admonitionblock td.icon .icon-note:before { content: "\f05a"; color: #005498; color: #003f72; }
.admonitionblock td.icon .icon-tip:before { content: "\f0eb"; text-shadow: 1px 1px 2px rgba(155, 155, 0, 0.8); color: #111; }
.admonitionblock td.icon .icon-warning:before { content: "\f071"; color: #bf6900; }
.admonitionblock td.icon .icon-caution:before { content: "\f06d"; color: #bf3400; }
.admonitionblock td.icon .icon-important:before { content: "\f06a"; color: #bf0000; }
.conum { display: inline-block; color: white !important; background-color: #222222; -webkit-border-radius: 100px; border-radius: 100px; text-align: center; width: 20px; height: 20px; font-size: 12px; font-weight: bold; line-height: 20px; font-family: Arial, sans-serif; font-style: normal; position: relative; top: -2px; letter-spacing: -1px; }
.conum * { color: white !important; }
.conum + b { display: none; }
.conum:after { content: attr(data-value); }
.conum:not([data-value]):empty { display: none; }
.literalblock > .content > pre, .listingblock > .content > pre { -webkit-border-radius: 0; border-radius: 0; }

</style>
<link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/font-awesome/3.2.1/css/font-awesome.min.css">
<style>
.highlight .hll { background-color: #ffffcc }
.highlight  { background: #ffffff; }
.highlight .tok-c { color: #888888 } /* Comment */
.highlight .tok-err { color: #a61717; background-color: #e3d2d2 } /* Error */
.highlight .tok-k { color: #008800; font-weight: bold } /* Keyword */
.highlight .tok-cm { color: #888888 } /* Comment.Multiline */
.highlight .tok-cp { color: #cc0000; font-weight: bold } /* Comment.Preproc */
.highlight .tok-c1 { color: #888888 } /* Comment.Single */
.highlight .tok-cs { color: #cc0000; font-weight: bold; background-color: #fff0f0 } /* Comment.Special */
.highlight .tok-gd { color: #000000; background-color: #ffdddd } /* Generic.Deleted */
.highlight .tok-ge { font-style: italic } /* Generic.Emph */
.highlight .tok-gr { color: #aa0000 } /* Generic.Error */
.highlight .tok-gh { color: #333333 } /* Generic.Heading */
.highlight .tok-gi { color: #000000; background-color: #ddffdd } /* Generic.Inserted */
.highlight .tok-go { color: #888888 } /* Generic.Output */
.highlight .tok-gp { color: #555555 } /* Generic.Prompt */
.highlight .tok-gs { font-weight: bold } /* Generic.Strong */
.highlight .tok-gu { color: #666666 } /* Generic.Subheading */
.highlight .tok-gt { color: #aa0000 } /* Generic.Traceback */
.highlight .tok-kc { color: #008800; font-weight: bold } /* Keyword.Constant */
.highlight .tok-kd { color: #008800; font-weight: bold } /* Keyword.Declaration */
.highlight .tok-kn { color: #008800; font-weight: bold } /* Keyword.Namespace */
.highlight .tok-kp { color: #008800 } /* Keyword.Pseudo */
.highlight .tok-kr { color: #008800; font-weight: bold } /* Keyword.Reserved */
.highlight .tok-kt { color: #888888; font-weight: bold } /* Keyword.Type */
.highlight .tok-m { color: #0000DD; font-weight: bold } /* Literal.Number */
.highlight .tok-s { color: #dd2200; background-color: #fff0f0 } /* Literal.String */
.highlight .tok-na { color: #336699 } /* Name.Attribute */
.highlight .tok-nb { color: #003388 } /* Name.Builtin */
.highlight .tok-nc { color: #bb0066; font-weight: bold } /* Name.Class */
.highlight .tok-no { color: #003366; font-weight: bold } /* Name.Constant */
.highlight .tok-nd { color: #555555 } /* Name.Decorator */
.highlight .tok-ne { color: #bb0066; font-weight: bold } /* Name.Exception */
.highlight .tok-nf { color: #0066bb; font-weight: bold } /* Name.Function */
.highlight .tok-nl { color: #336699; font-style: italic } /* Name.Label */
.highlight .tok-nn { color: #bb0066; font-weight: bold } /* Name.Namespace */
.highlight .tok-py { color: #336699; font-weight: bold } /* Name.Property */
.highlight .tok-nt { color: #bb0066; font-weight: bold } /* Name.Tag */
.highlight .tok-nv { color: #336699 } /* Name.Variable */
.highlight .tok-ow { color: #008800 } /* Operator.Word */
.highlight .tok-w { color: #bbbbbb } /* Text.Whitespace */
.highlight .tok-mf { color: #0000DD; font-weight: bold } /* Literal.Number.Float */
.highlight .tok-mh { color: #0000DD; font-weight: bold } /* Literal.Number.Hex */
.highlight .tok-mi { color: #0000DD; font-weight: bold } /* Literal.Number.Integer */
.highlight .tok-mo { color: #0000DD; font-weight: bold } /* Literal.Number.Oct */
.highlight .tok-sb { color: #dd2200; background-color: #fff0f0 } /* Literal.String.Backtick */
.highlight .tok-sc { color: #dd2200; background-color: #fff0f0 } /* Literal.String.Char */
.highlight .tok-sd { color: #dd2200; background-color: #fff0f0 } /* Literal.String.Doc */
.highlight .tok-s2 { color: #dd2200; background-color: #fff0f0 } /* Literal.String.Double */
.highlight .tok-se { color: #0044dd; background-color: #fff0f0 } /* Literal.String.Escape */
.highlight .tok-sh { color: #dd2200; background-color: #fff0f0 } /* Literal.String.Heredoc */
.highlight .tok-si { color: #3333bb; background-color: #fff0f0 } /* Literal.String.Interpol */
.highlight .tok-sx { color: #22bb22; background-color: #f0fff0 } /* Literal.String.Other */
.highlight .tok-sr { color: #008800; background-color: #fff0ff } /* Literal.String.Regex */
.highlight .tok-s1 { color: #dd2200; background-color: #fff0f0 } /* Literal.String.Single */
.highlight .tok-ss { color: #aa6600; background-color: #fff0f0 } /* Literal.String.Symbol */
.highlight .tok-bp { color: #003388 } /* Name.Builtin.Pseudo */
.highlight .tok-vc { color: #336699 } /* Name.Variable.Class */
.highlight .tok-vg { color: #dd7700 } /* Name.Variable.Global */
.highlight .tok-vi { color: #3333bb } /* Name.Variable.Instance */
.highlight .tok-il { color: #0000DD; font-weight: bold } /* Literal.Number.Integer.Long */
</style>
</head>
<body class="article">
<div id="header">
<h1>OACensus Documentation</h1>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_introduction">Introduction</a></li>
<li><a href="#_use_cases">Use Cases</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#_institutional_open_access_census">Institutional Open Access Census</a></li>
<li><a href="#_individual_openness_report">Individual Openness Report</a></li>
<li><a href="#_topic_openness_report">Topic Openness Report</a></li>
<li><a href="#_rcuk_policy_compliance_report">RCUK Policy Compliance Report</a></li>
</ul>
</li>
<li><a href="#_user_guide">User Guide</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#_command_line_interface">Command Line Interface</a></li>
<li><a href="#_config_file_format">Config File Format</a></li>
</ul>
</li>
<li><a href="#_writing_scrapers_and_reports">Writing Scrapers and Reports</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#_scraper_design">Scraper Design</a></li>
<li><a href="#_report_design">Report Design</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_introduction">Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This tool consists of several configurable data scrapers and parsers, and also
configurable reporting tools.</p>
</div>
<div class="paragraph">
<p>Scraping is handled in a separate step from parsing, and scraped pages are
stored in a cache.</p>
</div>
<div class="paragraph">
<p>Many parsers work on the data provided from previous parsers, so you need to
take into consideration the ordering of parsers.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_use_cases">Use Cases</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_institutional_open_access_census">Institutional Open Access Census</h3>
<div class="sect3">
<h4 id="_user_story">User Story</h4>
<div class="paragraph">
<p>A librarian at Oxford University wishes to understand the amount of Open Access
content, as defined in different ways, in the research they publish. They first
need to create a list of research articles published from Oxford University.
They use PubMed and CrossRef as sources of articles that provide affiliation
information to generate the list of article DOIs. For each article they then
wish to ask: a) Is this in an Open Access Journal (using DOAJ) b) Does the
article have an open license (OAG) and c) Is the article in one of the
following repositories (PMC/EuropePMC, OpenAIRE, the Oxford Institutional
repository[1]). They aim to provide a report on this once a month.</p>
</div>
<div class="paragraph">
<p>[1] Most IRs can be searched via a standard protocol OAI-PMH. It would be
reasonable to ask the user to supply the appropriate URL for the API endpoint</p>
</div>
</div>
<div class="sect3">
<h4 id="_pubmed_articles">PubMed Articles</h4>
<div class="paragraph">
<p>We&#8217;ll retrieve a list of articles where the affiliation is Oxford University.</p>
</div>
<div class="paragraph">
<p>To determine how to configure the pubmed query, we first review the docs for
the <code>pubmed</code> scraper:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code class="console language-console"><span class="tok-gp">$</span> oacensus list -alias pubmed


<span class="tok-go">     alias: pubmed</span>
<span class="tok-go">     Creates a single ArticleList and individual Article objects for all</span>
<span class="tok-go">     articles returned from pubmed matching the [required] search query.</span>

<span class="tok-go">         base-url: Base url of API. (http://eutils.ncbi.nlm.nih.gov/entrez/eutils/)</span>
<span class="tok-go">         cache: Location to copy cache files from. (None)</span>
<span class="tok-go">         delay: Time in seconds to delay between API requests. (1)</span>
<span class="tok-go">         filepattern: Names of files which hold data in cache. (data_%04d.xml)</span>
<span class="tok-go">         initial-ret-max: Maximum number of entries to return in the initial query. (5)</span>
<span class="tok-go">         ncbi-db: Name of NCBI database to query. (pubmed)</span>
<span class="tok-go">         ret-max: Maximum number of entries to return in any single query. (10000)</span>
<span class="tok-go">         search: Search query to include. (None)</span>
</code></pre>
</div>
</div>
<div class="paragraph">
<p>We only need to specify the <code>search</code> parameter:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code class="yaml language-yaml"><span class="tok-p-Indicator">-</span> <span class="tok-l-Scalar-Plain">pubmed</span><span class="tok-p-Indicator">:</span>
    <span class="tok-l-Scalar-Plain">search</span><span class="tok-p-Indicator">:</span> <span class="tok-s">&#39;&quot;Oxford</span><span class="tok-nv"> </span><span class="tok-s">University&quot;[affiliation]</span><span class="tok-nv"> </span><span class="tok-s">AND</span><span class="tok-nv"> </span><span class="tok-s">2012[pdat]&#39;</span>
</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_crossref_articles">CrossRef Articles</h4>
<div class="paragraph">
<p>TBD.</p>
</div>
</div>
<div class="sect3">
<h4 id="_doaj_metadata">DOAJ Metadata</h4>
<div class="paragraph">
<p>The <code>doaj</code> scraper fetches the full listing of open access journals from DOAJ.</p>
</div>
<div class="paragraph">
<p>Then, any journals in the database matching DOAJ ISSNs are updated with DOAJ
information about openness and license information.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code class="console language-console"><span class="tok-gp">$</span> oacensus list -alias doaj


<span class="tok-go">     alias: doaj</span>
<span class="tok-go">     Updates journals in the database with openness information from DOAJ.</span>

<span class="tok-go">         base-url: Base url for accessing DOAJ. (http://www.doaj.org/doaj)</span>
<span class="tok-go">         cache: Location to copy cache files from. (None)</span>
<span class="tok-go">         data-file: File to save data under. (doaj.pickle)</span>
<span class="tok-go">         standard-params: Params used in every request. ({&#39;uiLanguage&#39;: &#39;en&#39;, &#39;func&#39;: &#39;browse&#39;})</span>
</code></pre>
</div>
</div>
<div class="paragraph">
<p>We don&#8217;t need to set any parameters:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code class="yaml language-yaml"><span class="tok-p-Indicator">-</span> <span class="tok-l-Scalar-Plain">doaj</span><span class="tok-p-Indicator">:</span>
    <span class="tok-l-Scalar-Plain">cache</span><span class="tok-p-Indicator">:</span> <span class="tok-s">&quot;/home/ana/dev/oacensus-new/examples/.doaj-cache&quot;</span>
</code></pre>
</div>
</div>
<div class="paragraph">
<p>(The <code>cache</code> parameter is for convenience of generating these docs reasonably
 quickly - you should not use it unless you want to manually maintain a cache.
 There is a cache maintained for you automatically.)</p>
</div>
</div>
<div class="sect3">
<h4 id="_oag_licensing_information">OAG Licensing Information</h4>
<div class="paragraph">
<p>The OAG scraper retrieves OAG metadata for any article in the database which has a DOI:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code class="console language-console"><span class="tok-gp">$</span> oacensus list -alias oag


<span class="tok-go">     alias: oag</span>
<span class="tok-go">     Gets license information for all articles with DOIs in the database.</span>

<span class="tok-go">         base-url: Base url of OAG API (http://oag.cottagelabs.com/lookup/)</span>
<span class="tok-go">         cache: Location to copy cache files from. (None)</span>
</code></pre>
</div>
</div>
<div class="paragraph">
<p>We don&#8217;t need to set any parameters:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code class="yaml language-yaml"><span class="tok-p-Indicator">-</span> <span class="tok-l-Scalar-Plain">oag</span>
</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_running_the_example">Running the Example</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code class="console language-console"><span class="tok-gp">$</span> oacensus run --config example1.yaml --reports excel
<span class="tok-go">running pubmed</span>
<span class="tok-go">.oacensus/cache/3ba45806340f50cce112623cd2055b00</span>
<span class="tok-go">  calling scrape method...</span>
<span class="tok-go">  there are 296 total articles matching the search</span>
<span class="tok-go">  calling process method...</span>
<span class="tok-go">   &lt;ArticleList: u&#39;&lt;Article List 296: pubmed search: &quot;Oxford University&quot;[affiliation] AND 2012[pdat]&gt;&#39;&gt;</span>
<span class="tok-go">running oag</span>
<span class="tok-go">.oacensus/cache/0e11951337d0ee1d99bee44effeac9cb</span>
<span class="tok-go">  calling scrape method...</span>
<span class="tok-go">  calling process method...</span>
<span class="tok-go">  no info found for &lt;Article: u&#39;Enhanced cognitive behaviour therapy for...&#39;&gt;</span>
<span class="tok-go">running doaj</span>
<span class="tok-go">.oacensus/cache/0d7734f817f78ed1eb1c4740bbe2b766</span>
<span class="tok-go">  using cache location /home/ana/dev/oacensus-new/examples/.doaj-cache...</span>
<span class="tok-go">  calling process method...</span>
<span class="tok-go">scraping and parsing completed in 0:00:47.371830</span>
<span class="tok-go">running report excel</span>
<span class="tok-go">  database contents written to dump.xls</span>
<span class="tok-go">reports completed in 0:00:00.817943</span>
</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>excel</code> report dumps each database table onto an excel worksheet for inspection.</p>
</div>
<div class="paragraph">
<p><a href="dump.xls">Excel Report</a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_individual_openness_report">Individual Openness Report</h3>
<div class="sect3">
<h4 id="_user_story_2">User Story</h4>
<div class="paragraph">
<p>A researcher wishes to provide a report demonstrating that they are a good
citizen in generating open content. They use their ORCID profile as a source of
article information. For each article they wish to show that it is either
available at the publisher website freely to read[2] or is in either PMC or
their institutional repository.</p>
</div>
<div class="paragraph">
<p>[2] "free-to-read" is a metadata element that Crossref will be shortly rolling
out. It doesn&#8217;t yet exist and will take some time to reach critical mass.</p>
</div>
</div>
<div class="sect3">
<h4 id="_implementation">Implementation</h4>
<div class="paragraph">
<p>For now this report is implementing just using OAG openness data.</p>
</div>
<div class="paragraph">
<p>Here is the full project configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code class="yaml language-yaml"><span class="tok-p-Indicator">-</span> <span class="tok-l-Scalar-Plain">orcid</span><span class="tok-p-Indicator">:</span>
    <span class="tok-l-Scalar-Plain">orcid</span><span class="tok-p-Indicator">:</span> <span class="tok-l-Scalar-Plain">0000-0002-0068-716X</span>

<span class="tok-p-Indicator">-</span> <span class="tok-l-Scalar-Plain">oag</span>
</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here is the run output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code class="console language-console"><span class="tok-gp">$</span> oacensus run --config example2.yaml --reports <span class="tok-s2">&quot;personal-openness&quot;</span>
<span class="tok-go">running orcid</span>
<span class="tok-go">.oacensus/cache/74a1d1d0cce7e41702f1e926f876c71b</span>
<span class="tok-go">  calling scrape method...</span>
<span class="tok-go">  calling process method...</span>
<span class="tok-go">running oag</span>
<span class="tok-go">.oacensus/cache/0e11951337d0ee1d99bee44effeac9cb</span>
<span class="tok-go">  calling scrape method...</span>
<span class="tok-go">  calling process method...</span>
<span class="tok-go">scraping and parsing completed in 0:00:06.263804</span>
<span class="tok-go">running report personal-openness</span>
<span class="tok-go">reports completed in 0:00:00.776689</span>
</code></pre>
</div>
</div>
<div class="paragraph">
<p>And here is the resulting report:</p>
</div>
<iframe src="report-openness/index.html" style="width: 800px; height: 350px;">
</iframe>
</div>
</div>
<div class="sect2">
<h3 id="_topic_openness_report">Topic Openness Report</h3>
<div class="sect3">
<h4 id="_user_story_3">User Story</h4>
<div class="paragraph">
<p>A patient advocate wants to understand how much content related to their
disease is available. They search PubMed to identify a set of articles and a
comparison set for a different disease. They then wish to know what proportion
of articles are free to read via the publisher[2], available in PubMedCentral,
and available openly licensed.</p>
</div>
<div class="paragraph">
<p>[2] "free-to-read" is a metadata element that Crossref will be shortly rolling
out. It doesn&#8217;t yet exist and will take some time to reach critical mass.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_rcuk_policy_compliance_report">RCUK Policy Compliance Report</h3>
<div class="sect3">
<h4 id="_user_story_4">User Story</h4>
<div class="paragraph">
<p>A UK funder wishes to report on RCUK policy compliance. They use Gateway to
Research to generate a list of publications relating to their funding.
Compliance is provided via two routes. If the article is OA through the
publisher website it must have a CC BY license (OAG) or it must be made
available through a repository. The funder elects to search PMC, OpenAIRE, and
a UK federated institutional repository search tool[3] to identify copies in
repositories.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_user_guide">User Guide</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_command_line_interface">Command Line Interface</h3>
<div class="paragraph">
<p>The main <code>help</code> command is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code class="console language-console"><span class="tok-gp">$</span> oacensus <span class="tok-nb">help</span>
<span class="tok-go">Available commands for oacensus are:</span>
<span class="tok-go">   default</span>
<span class="tok-go">   help</span>
<span class="tok-go">   list</span>
<span class="tok-go">   reports</span>
<span class="tok-go">   run</span>

<span class="tok-go">For help on a particular command type, e.g., &#39;oacensus help -on run&#39;</span>
</code></pre>
</div>
</div>
<div class="paragraph">
<p>This lists each of the available commands.</p>
</div>
<div class="paragraph">
<p>Here is help on the <code>run</code> command which is the main command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code class="console language-console"><span class="tok-gp">$</span> oacensus <span class="tok-nb">help</span> -on run
<span class="tok-go">=======================</span>
<span class="tok-go">Help for &#39;oacensus run&#39;</span>
<span class="tok-go">=======================</span>
<span class="tok-go">   Arguments:</span>
<span class="tok-go">      cachedir - Directory to store cached scraped data.</span>
<span class="tok-go">            [optional, defaults to &#39;.oacensus/cache/&#39;]</span>
<span class="tok-go">             e.g. &#39;oacensus run --cachedir .oacensus/cache/&#39;</span>


<span class="tok-go">      config - YAML file to read configuration from.</span>
<span class="tok-go">            [optional, defaults to &#39;oacensus.yaml&#39;]</span>
<span class="tok-go">             e.g. &#39;oacensus run --config oacensus.yaml&#39;</span>


<span class="tok-go">      dbfile - Name of sqlite db file.</span>
<span class="tok-go">            [optional, defaults to &#39;oacensus.sqlite3&#39;]</span>
<span class="tok-go">             e.g. &#39;oacensus run --dbfile oacensus.sqlite3&#39;</span>


<span class="tok-go">      profile - Whether to run in profiler (dev only).</span>
<span class="tok-go">            [optional, defaults to &#39;False&#39;] e.g. &#39;oacensus run --profile False&#39;</span>


<span class="tok-go">      progress - Whether to show progress indicators.</span>
<span class="tok-go">            [optional, defaults to &#39;False&#39;] e.g. &#39;oacensus run --progress False&#39;</span>


<span class="tok-go">      reports - Reports to run.</span>
<span class="tok-go">            [optional, defaults to &#39;&#39;] e.g. &#39;oacensus run --reports &#39;</span>


<span class="tok-go">      workdir - Directory to store temp working directories.</span>
<span class="tok-go">            [optional, defaults to &#39;.oacensus/work/&#39;]</span>
<span class="tok-go">             e.g. &#39;oacensus run --workdir .oacensus/work/&#39;</span>
</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can run reports as part of <code>run</code>, but you can also run reports separately
after you have executed the <code>run</code> command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code class="console language-console"><span class="tok-gp">$</span> oacensus <span class="tok-nb">help</span> -on reports
<span class="tok-go">===========================</span>
<span class="tok-go">Help for &#39;oacensus reports&#39;</span>
<span class="tok-go">===========================</span>
<span class="tok-go">   Arguments:</span>
<span class="tok-go">      dbfile - db file to use for reports</span>
<span class="tok-go">            [optional, defaults to &#39;oacensus.sqlite3&#39;]</span>
<span class="tok-go">             e.g. &#39;oacensus reports --dbfile oacensus.sqlite3&#39;</span>


<span class="tok-go">      reports - reports to run</span>
<span class="tok-go">            [optional, defaults to &#39;&#39;] e.g. &#39;oacensus reports --reports &#39;</span>
</code></pre>
</div>
</div>
<div class="paragraph">
<p>To get a list of available scrapers or reports, use the <code>list</code> command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code class="console language-console"><span class="tok-gp">$</span> oacensus <span class="tok-nb">help</span> -on list
<span class="tok-go">========================</span>
<span class="tok-go">Help for &#39;oacensus list&#39;</span>
<span class="tok-go">========================</span>
<span class="tok-go">   List the available scraper or reporter plugins.</span>

<span class="tok-go">   Arguments:</span>
<span class="tok-go">      alias - Optionally, only print help for the specified alias.</span>
<span class="tok-go">            [optional, defaults to &#39;&#39;] e.g. &#39;oacensus list --alias &#39;</span>


<span class="tok-go">      reports - Whether to list available reports.</span>
<span class="tok-go">            [optional, defaults to &#39;False&#39;] e.g. &#39;oacensus list --reports False&#39;</span>


<span class="tok-go">      scrapers - Whether to list available scrapers.</span>
<span class="tok-go">            [optional, defaults to &#39;True&#39;] e.g. &#39;oacensus list --scrapers True&#39;</span>
</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here are the available scrapers:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code class="console language-console"><span class="tok-gp">$</span> oacensus list --scrapers


<span class="tok-go">     alias: biomed</span>
<span class="tok-go">     Scrape journal names from BioMed Central, an open access journal publisher.</span>

<span class="tok-go">     This scraper obtains journal names, urls and ISSNs from the BioMed Central</span>
<span class="tok-go">     website.</span>

<span class="tok-go">         cache: Location to copy cache files from. (None)</span>
<span class="tok-go">         data-file: file to save data under (bmc-journal-list.html)</span>
<span class="tok-go">         url: url to scrape (http://www.biomedcentral.com/journals)</span>


<span class="tok-go">     alias: crossref</span>
<span class="tok-go">     Gets crossref information for all articles with DOIs in the database.</span>

<span class="tok-go">     Currently this does nothing with the returned data.</span>

<span class="tok-go">         base-url: Base url of crossref API (http://search.labs.crossref.org/dois)</span>
<span class="tok-go">         cache: Location to copy cache files from. (None)</span>


<span class="tok-go">     alias: doaj</span>
<span class="tok-go">     Updates journals in the database with openness information from DOAJ.</span>

<span class="tok-go">         base-url: Base url for accessing DOAJ. (http://www.doaj.org/doaj)</span>
<span class="tok-go">         cache: Location to copy cache files from. (None)</span>
<span class="tok-go">         data-file: File to save data under. (doaj.pickle)</span>
<span class="tok-go">         standard-params: Params used in every request. ({&#39;uiLanguage&#39;: &#39;en&#39;, &#39;func&#39;: &#39;browse&#39;})</span>


<span class="tok-go">     alias: elsevier</span>
<span class="tok-go">     Scrape journal names from Elsevier website.</span>

<span class="tok-go">         base-url: Base url to scrape. (http://www.elsevier.com/journals/title/)</span>
<span class="tok-go">         cache: Location to copy cache files from. (None)</span>
<span class="tok-go">         data-file: file to save data under (elsevier-journal-list.html)</span>
<span class="tok-go">         non-alpha-pages: List of all pages to scrape which are named something other than a letter of the alphabet. ([&#39;other&#39;])</span>


<span class="tok-go">     alias: oag</span>
<span class="tok-go">     Gets license information for all articles with DOIs in the database.</span>

<span class="tok-go">         base-url: Base url of OAG API (http://oag.cottagelabs.com/lookup/)</span>
<span class="tok-go">         cache: Location to copy cache files from. (None)</span>


<span class="tok-go">     alias: oai</span>
<span class="tok-go">     Scrape OAI/PMH repositories.</span>

<span class="tok-go">     Not finished. Doesn&#39;t do anything right now.</span>
<span class="tok-go">     This has some ORA (Oxford University Research Archive) specific stuff in here.</span>

<span class="tok-go">         base-objects-url: URL at which objects can be accessed by uuid. (None)</span>
<span class="tok-go">         cache: Location to copy cache files from. (None)</span>
<span class="tok-go">         data-file: internal data file for storage (oai.pickle)</span>
<span class="tok-go">         from: &#39;from&#39; parameter, in &quot;YYYY-MM-DD&quot; format (None)</span>
<span class="tok-go">         pmh-endpoint: Base url of OAI PMH interface to repository. (None)</span>
<span class="tok-go">         set: &#39;set&#39; parameter (None)</span>
<span class="tok-go">         until: &#39;until&#39; parameter, in &quot;YYYY-MM-DD&quot; format (None)</span>


<span class="tok-go">     alias: orcid</span>
<span class="tok-go">     Generate lists of articles for authors based on ORCID.</span>

<span class="tok-go">         cache: Location to copy cache files from. (None)</span>
<span class="tok-go">         orcid: ORCID of author to process, or a list of ORCIDS. (None)</span>
<span class="tok-go">         orcid-data-file: File to save data under. (orcid.pickle)</span>


<span class="tok-go">     alias: pubmed</span>
<span class="tok-go">     Creates a single ArticleList and individual Article objects for all</span>
<span class="tok-go">     articles returned from pubmed matching the [required] search query.</span>

<span class="tok-go">         base-url: Base url of API. (http://eutils.ncbi.nlm.nih.gov/entrez/eutils/)</span>
<span class="tok-go">         cache: Location to copy cache files from. (None)</span>
<span class="tok-go">         delay: Time in seconds to delay between API requests. (1)</span>
<span class="tok-go">         filepattern: Names of files which hold data in cache. (data_%04d.xml)</span>
<span class="tok-go">         initial-ret-max: Maximum number of entries to return in the initial query. (5)</span>
<span class="tok-go">         ncbi-db: Name of NCBI database to query. (pubmed)</span>
<span class="tok-go">         ret-max: Maximum number of entries to return in any single query. (10000)</span>
<span class="tok-go">         search: Search query to include. (None)</span>


<span class="tok-go">     alias: scimago</span>
<span class="tok-go">     Download Scimago journal info.</span>

<span class="tok-go">         base-url: BASE url for downloading Scimago data. (http://www.scimagojr.com/journalrank.php)</span>
<span class="tok-go">         cache: Location to copy cache files from. (None)</span>
<span class="tok-go">         filename:  (scimago.html)</span>
<span class="tok-go">         year: Year for which to return data. (2012)</span>


<span class="tok-go">     alias: wiley</span>
<span class="tok-go">     Scraper for Wiley journals.</span>

<span class="tok-go">         cache: Location to copy cache files from. (None)</span>
<span class="tok-go">         data-file:  (wiley-journals.xls)</span>
<span class="tok-go">         header-row: Row in spreadsheet containing column headers. (5)</span>
<span class="tok-go">         url:  (http://wileyonlinelibrary.com/journals-list)</span>
</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here are the available reports:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code class="console language-console"><span class="tok-gp">$</span> oacensus list --reports


<span class="tok-go">     alias: excel</span>
<span class="tok-go">     Dump all database models to a single excel workbook.</span>

<span class="tok-go">         date-format-string: Excel style date format string. (D-MMM-YYYY)</span>
<span class="tok-go">         filename: Name of file to write excel dump to. (dump.xls)</span>


<span class="tok-go">     alias: personal-openness</span>
<span class="tok-go">     Generate a personal openness report.</span>

<span class="tok-go">         output-dir: Directory to output report. Should start with &#39;report-&#39; prefix (report-openness)</span>
<span class="tok-go">         output-file: Name of report. (index.html)</span>
<span class="tok-go">         template-dirs: Locations to look for template files. ([&#39;.&#39;, &#39;/home/ana/dev/oacensus-new/oacensus/reports/templates&#39;])</span>
<span class="tok-go">         template-file: Path to template file. (openness.html)</span>
</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_config_file_format">Config File Format</h3>
<div class="paragraph">
<p>Config files are written in YAML and should consist of a list of the scrapers
to be run, in order, followed by an optional dictionary of custom settings to
provide to the scraper.</p>
</div>
<div class="paragraph">
<p>Here are some examples:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code class="yaml language-yaml"><span class="tok-c1">### &quot;pubmed&quot;</span>
<span class="tok-p-Indicator">-</span> <span class="tok-l-Scalar-Plain">pubmed</span><span class="tok-p-Indicator">:</span>
    <span class="tok-l-Scalar-Plain">search</span><span class="tok-p-Indicator">:</span> <span class="tok-s">&#39;&quot;Oxford</span><span class="tok-nv"> </span><span class="tok-s">University&quot;[affiliation]</span><span class="tok-nv"> </span><span class="tok-s">AND</span><span class="tok-nv"> </span><span class="tok-s">2012[pdat]&#39;</span>

<span class="tok-c1">### &quot;oag&quot;</span>
<span class="tok-p-Indicator">-</span> <span class="tok-l-Scalar-Plain">oag</span>

<span class="tok-c1">### &quot;doaj&quot;</span>
<span class="tok-p-Indicator">-</span> <span class="tok-l-Scalar-Plain">doaj</span><span class="tok-p-Indicator">:</span>
    <span class="tok-l-Scalar-Plain">cache</span><span class="tok-p-Indicator">:</span> <span class="tok-s">&quot;/home/ana/dev/oacensus-new/examples/.doaj-cache&quot;</span>
</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code class="yaml language-yaml"><span class="tok-p-Indicator">-</span> <span class="tok-l-Scalar-Plain">orcid</span><span class="tok-p-Indicator">:</span>
    <span class="tok-l-Scalar-Plain">orcid</span><span class="tok-p-Indicator">:</span> <span class="tok-l-Scalar-Plain">0000-0002-0068-716X</span>

<span class="tok-p-Indicator">-</span> <span class="tok-l-Scalar-Plain">oag</span>
</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_writing_scrapers_and_reports">Writing Scrapers and Reports</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Scrapers and reports are implemented using the
<a href="http://dexy.github.io/cashew/">cashew plugin system</a>.</p>
</div>
<div class="sect2">
<h3 id="_scraper_design">Scraper Design</h3>
<div class="paragraph">
<p>Scrapers work in two phases. The first phase is <code>scrape</code> and the second phase
is <code>process</code>. Results of the <code>scrape</code> phase are cached and, if no parameters have
changed, re-used in subsequent calls. The <code>scrape</code> phase should do as much
pre-processing as possible (for efficiency) but they should not do anything
that depends on database state or on the ordering of scrapers. Anything which
depends on state should occur in the <code>process</code> phase which is not cached.</p>
</div>
</div>
<div class="sect2">
<h3 id="_report_design">Report Design</h3>
<div class="paragraph">
<p>Reports take the harvested data and present it. Reports can be of any format.</p>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2013-10-25 17:53:15 PDT
</div>
</div>
</body>
</html>