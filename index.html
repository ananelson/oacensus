<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="generator" content="Asciidoctor 0.1.4">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>OACensus Documentation</title>
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
article, aside, details, figcaption, figure, footer, header, hgroup, main, nav, section, summary { display: block; }
audio, canvas, video { display: inline-block; }
audio:not([controls]) { display: none; height: 0; }
[hidden] { display: none; }
html { background: #fff; color: #000; font-family: sans-serif; -ms-text-size-adjust: 100%; -webkit-text-size-adjust: 100%; }
body { margin: 0; }
a:focus { outline: thin dotted; }
a:active, a:hover { outline: 0; }
h1 { font-size: 2em; margin: 0.67em 0; }
abbr[title] { border-bottom: 1px dotted; }
b, strong { font-weight: bold; }
dfn { font-style: italic; }
hr { -moz-box-sizing: content-box; box-sizing: content-box; height: 0; }
mark { background: #ff0; color: #000; }
code, kbd, pre, samp { font-family: monospace, serif; font-size: 1em; }
pre { white-space: pre-wrap; }
q { quotes: "\201C" "\201D" "\2018" "\2019"; }
small { font-size: 80%; }
sub, sup { font-size: 75%; line-height: 0; position: relative; vertical-align: baseline; }
sup { top: -0.5em; }
sub { bottom: -0.25em; }
img { border: 0; }
svg:not(:root) { overflow: hidden; }
figure { margin: 0; }
fieldset { border: 1px solid #c0c0c0; margin: 0 2px; padding: 0.35em 0.625em 0.75em; }
legend { border: 0; padding: 0; }
button, input, select, textarea { font-family: inherit; font-size: 100%; margin: 0; }
button, input { line-height: normal; }
button, select { text-transform: none; }
button, html input[type="button"], input[type="reset"], input[type="submit"] { -webkit-appearance: button; cursor: pointer; }
button[disabled], html input[disabled] { cursor: default; }
input[type="checkbox"], input[type="radio"] { box-sizing: border-box; padding: 0; }
input[type="search"] { -webkit-appearance: textfield; -moz-box-sizing: content-box; -webkit-box-sizing: content-box; box-sizing: content-box; }
input[type="search"]::-webkit-search-cancel-button, input[type="search"]::-webkit-search-decoration { -webkit-appearance: none; }
button::-moz-focus-inner, input::-moz-focus-inner { border: 0; padding: 0; }
textarea { overflow: auto; vertical-align: top; }
table { border-collapse: collapse; border-spacing: 0; }
*, *:before, *:after { -moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; }
html, body { font-size: 100%; }
body { background: white; color: #222222; padding: 0; margin: 0; font-family: "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif; font-weight: normal; font-style: normal; line-height: 1; position: relative; cursor: auto; }
a:hover { cursor: pointer; }
a:focus { outline: none; }
img, object, embed { max-width: 100%; height: auto; }
object, embed { height: 100%; }
img { -ms-interpolation-mode: bicubic; }
#map_canvas img, #map_canvas embed, #map_canvas object, .map_canvas img, .map_canvas embed, .map_canvas object { max-width: none !important; }
.left { float: left !important; }
.right { float: right !important; }
.text-left { text-align: left !important; }
.text-right { text-align: right !important; }
.text-center { text-align: center !important; }
.text-justify { text-align: justify !important; }
.hide { display: none; }
.antialiased, body { -webkit-font-smoothing: antialiased; }
img { display: inline-block; vertical-align: middle; }
textarea { height: auto; min-height: 50px; }
select { width: 100%; }
p.lead, .paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p { font-size: 1.21875em; line-height: 1.6; }
.subheader, #content #toctitle, .admonitionblock td.content > .title, .exampleblock > .title, .imageblock > .title, .videoblock > .title, .listingblock > .title, .literalblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, .sidebarblock > .title, .tableblock > .title, .verseblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title, .tableblock > caption { line-height: 1.4; color: #7a2518; font-weight: 300; margin-top: 0.2em; margin-bottom: 0.5em; }
div, dl, dt, dd, ul, ol, li, h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6, pre, form, p, blockquote, th, td { margin: 0; padding: 0; direction: ltr; }
a { color: #005498; text-decoration: underline; line-height: inherit; }
a:hover, a:focus { color: #00467f; }
a img { border: none; }
p { font-family: inherit; font-weight: normal; font-size: 1em; line-height: 1.6; margin-bottom: 1.25em; text-rendering: optimizeLegibility; }
p aside { font-size: 0.875em; line-height: 1.35; font-style: italic; }
h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { font-family: Georgia, "URW Bookman L", Helvetica, Arial, sans-serif; font-weight: normal; font-style: normal; color: #ba3925; text-rendering: optimizeLegibility; margin-top: 1em; margin-bottom: 0.5em; line-height: 1.2125em; }
h1 small, h2 small, h3 small, #toctitle small, .sidebarblock > .content > .title small, h4 small, h5 small, h6 small { font-size: 60%; color: #e99b8f; line-height: 0; }
h1 { font-size: 2.125em; }
h2 { font-size: 1.6875em; }
h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.375em; }
h4 { font-size: 1.125em; }
h5 { font-size: 1.125em; }
h6 { font-size: 1em; }
hr { border: solid #dddddd; border-width: 1px 0 0; clear: both; margin: 1.25em 0 1.1875em; height: 0; }
em, i { font-style: italic; line-height: inherit; }
strong, b { font-weight: bold; line-height: inherit; }
small { font-size: 60%; line-height: inherit; }
code { font-family: Consolas, "Liberation Mono", Courier, monospace; font-weight: normal; color: #6d180b; }
ul, ol, dl { font-size: 1em; line-height: 1.6; margin-bottom: 1.25em; list-style-position: outside; font-family: inherit; }
ul, ol { margin-left: 1.5em; }
ul li ul, ul li ol { margin-left: 1.25em; margin-bottom: 0; font-size: 1em; }
ul.square li ul, ul.circle li ul, ul.disc li ul { list-style: inherit; }
ul.square { list-style-type: square; }
ul.circle { list-style-type: circle; }
ul.disc { list-style-type: disc; }
ul.no-bullet { list-style: none; }
ol li ul, ol li ol { margin-left: 1.25em; margin-bottom: 0; }
dl dt { margin-bottom: 0.3125em; font-weight: bold; }
dl dd { margin-bottom: 1.25em; }
abbr, acronym { text-transform: uppercase; font-size: 90%; color: #222222; border-bottom: 1px dotted #dddddd; cursor: help; }
abbr { text-transform: none; }
blockquote { margin: 0 0 1.25em; padding: 0.5625em 1.25em 0 1.1875em; border-left: 1px solid #dddddd; }
blockquote cite { display: block; font-size: inherit; color: #555555; }
blockquote cite:before { content: "\2014 \0020"; }
blockquote cite a, blockquote cite a:visited { color: #555555; }
blockquote, blockquote p { line-height: 1.6; color: #6f6f6f; }
.vcard { display: inline-block; margin: 0 0 1.25em 0; border: 1px solid #dddddd; padding: 0.625em 0.75em; }
.vcard li { margin: 0; display: block; }
.vcard .fn { font-weight: bold; font-size: 0.9375em; }
.vevent .summary { font-weight: bold; }
.vevent abbr { cursor: auto; text-decoration: none; font-weight: bold; border: none; padding: 0 0.0625em; }
@media only screen and (min-width: 768px) { h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { line-height: 1.4; }
  h1 { font-size: 2.75em; }
  h2 { font-size: 2.3125em; }
  h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.6875em; }
  h4 { font-size: 1.4375em; } }
.print-only { display: none !important; }
@media print { * { background: transparent !important; color: #000 !important; box-shadow: none !important; text-shadow: none !important; }
  a, a:visited { text-decoration: underline; }
  a[href]:after { content: " (" attr(href) ")"; }
  abbr[title]:after { content: " (" attr(title) ")"; }
  .ir a:after, a[href^="javascript:"]:after, a[href^="#"]:after { content: ""; }
  pre, blockquote { border: 1px solid #999; page-break-inside: avoid; }
  thead { display: table-header-group; }
  tr, img { page-break-inside: avoid; }
  img { max-width: 100% !important; }
  @page { margin: 0.5cm; }
  p, h2, h3, #toctitle, .sidebarblock > .content > .title { orphans: 3; widows: 3; }
  h2, h3, #toctitle, .sidebarblock > .content > .title { page-break-after: avoid; }
  .hide-on-print { display: none !important; }
  .print-only { display: block !important; }
  .hide-for-print { display: none !important; }
  .show-for-print { display: inherit !important; } }
table { background: white; margin-bottom: 1.25em; border: solid 1px #dddddd; }
table thead, table tfoot { background: whitesmoke; font-weight: bold; }
table thead tr th, table thead tr td, table tfoot tr th, table tfoot tr td { padding: 0.5em 0.625em 0.625em; font-size: inherit; color: #222222; text-align: left; }
table tr th, table tr td { padding: 0.5625em 0.625em; font-size: inherit; color: #222222; }
table tr.even, table tr.alt, table tr:nth-of-type(even) { background: #f9f9f9; }
table thead tr th, table tfoot tr th, table tbody tr td, table tr td, table tfoot tr td { display: table-cell; line-height: 1.6; }
.clearfix:before, .clearfix:after, .float-group:before, .float-group:after { content: " "; display: table; }
.clearfix:after, .float-group:after { clear: both; }
*:not(pre) > code { font-size: 0.9375em; padding: 1px 3px 0; white-space: nowrap; background-color: #f2f2f2; border: 1px solid #cccccc; -webkit-border-radius: 4px; border-radius: 4px; text-shadow: none; }
pre, pre > code { line-height: 1.4; color: inherit; font-family: Consolas, "Liberation Mono", Courier, monospace; font-weight: normal; }
kbd.keyseq { color: #555555; }
kbd:not(.keyseq) { display: inline-block; color: #222222; font-size: 0.75em; line-height: 1.4; background-color: #F7F7F7; border: 1px solid #ccc; -webkit-border-radius: 3px; border-radius: 3px; -webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 2px white inset; box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 2px white inset; margin: -0.15em 0.15em 0 0.15em; padding: 0.2em 0.6em 0.2em 0.5em; vertical-align: middle; white-space: nowrap; }
kbd kbd:first-child { margin-left: 0; }
kbd kbd:last-child { margin-right: 0; }
.menuseq, .menu { color: #090909; }
p a > code:hover { color: #561309; }
#header, #content, #footnotes, #footer { width: 100%; margin-left: auto; margin-right: auto; margin-top: 0; margin-bottom: 0; max-width: 62.5em; *zoom: 1; position: relative; padding-left: 0.9375em; padding-right: 0.9375em; }
#header:before, #header:after, #content:before, #content:after, #footnotes:before, #footnotes:after, #footer:before, #footer:after { content: " "; display: table; }
#header:after, #content:after, #footnotes:after, #footer:after { clear: both; }
#header { margin-bottom: 2.5em; }
#header > h1 { color: black; font-weight: normal; border-bottom: 1px solid #dddddd; margin-bottom: -28px; padding-bottom: 32px; }
#header span { color: #6f6f6f; }
#header #revnumber { text-transform: capitalize; }
#header br { display: none; }
#header br + span { padding-left: 3px; }
#header br + span:before { content: "\2013 \0020"; }
#header br + span.author { padding-left: 0; }
#header br + span.author:before { content: ", "; }
#toc { border-bottom: 3px double #ebebeb; padding-bottom: 1.25em; }
#toc > ul { margin-left: 0.25em; }
#toc ul.sectlevel0 > li > a { font-style: italic; }
#toc ul.sectlevel0 ul.sectlevel1 { margin-left: 0; margin-top: 0.5em; margin-bottom: 0.5em; }
#toc ul { list-style-type: none; }
#toctitle { color: #7a2518; }
@media only screen and (min-width: 1280px) { body.toc2 { padding-left: 20em; }
  #toc.toc2 { position: fixed; width: 20em; left: 0; top: 0; border-right: 1px solid #ebebeb; border-bottom: 0; z-index: 1000; padding: 1em; height: 100%; overflow: auto; }
  #toc.toc2 #toctitle { margin-top: 0; }
  #toc.toc2 > ul { font-size: .95em; }
  #toc.toc2 ul ul { margin-left: 0; padding-left: 1.25em; }
  #toc.toc2 ul.sectlevel0 ul.sectlevel1 { padding-left: 0; margin-top: 0.5em; margin-bottom: 0.5em; }
  body.toc2.toc-right { padding-left: 0; padding-right: 20em; }
  body.toc2.toc-right #toc.toc2 { border-right: 0; border-left: 1px solid #ebebeb; left: auto; right: 0; } }
#content #toc { border-style: solid; border-width: 1px; border-color: #d9d9d9; margin-bottom: 1.25em; padding: 1.25em; background: #f2f2f2; border-width: 0; -webkit-border-radius: 4px; border-radius: 4px; }
#content #toc > :first-child { margin-top: 0; }
#content #toc > :last-child { margin-bottom: 0; }
#content #toc a { text-decoration: none; }
#content #toctitle { font-weight: bold; font-family: "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif; font-size: 1em; padding-left: 0.125em; }
#footer { max-width: 100%; background-color: #222222; padding: 1.25em; }
#footer-text { color: #dddddd; line-height: 1.44; }
.sect1 { padding-bottom: 1.25em; }
.sect1 + .sect1 { border-top: 3px double #ebebeb; }
#content h1 > a.anchor, h2 > a.anchor, h3 > a.anchor, #toctitle > a.anchor, .sidebarblock > .content > .title > a.anchor, h4 > a.anchor, h5 > a.anchor, h6 > a.anchor { position: absolute; width: 1em; margin-left: -1em; display: block; text-decoration: none; visibility: hidden; text-align: center; font-weight: normal; }
#content h1 > a.anchor:before, h2 > a.anchor:before, h3 > a.anchor:before, #toctitle > a.anchor:before, .sidebarblock > .content > .title > a.anchor:before, h4 > a.anchor:before, h5 > a.anchor:before, h6 > a.anchor:before { content: '\00A7'; font-size: .85em; vertical-align: text-top; display: block; margin-top: 0.05em; }
#content h1:hover > a.anchor, #content h1 > a.anchor:hover, h2:hover > a.anchor, h2 > a.anchor:hover, h3:hover > a.anchor, #toctitle:hover > a.anchor, .sidebarblock > .content > .title:hover > a.anchor, h3 > a.anchor:hover, #toctitle > a.anchor:hover, .sidebarblock > .content > .title > a.anchor:hover, h4:hover > a.anchor, h4 > a.anchor:hover, h5:hover > a.anchor, h5 > a.anchor:hover, h6:hover > a.anchor, h6 > a.anchor:hover { visibility: visible; }
#content h1 > a.link, h2 > a.link, h3 > a.link, #toctitle > a.link, .sidebarblock > .content > .title > a.link, h4 > a.link, h5 > a.link, h6 > a.link { color: #ba3925; text-decoration: none; }
#content h1 > a.link:hover, h2 > a.link:hover, h3 > a.link:hover, #toctitle > a.link:hover, .sidebarblock > .content > .title > a.link:hover, h4 > a.link:hover, h5 > a.link:hover, h6 > a.link:hover { color: #a53221; }
.imageblock, .literalblock, .listingblock, .verseblock, .videoblock { margin-bottom: 1.25em; }
.admonitionblock td.content > .title, .exampleblock > .title, .imageblock > .title, .videoblock > .title, .listingblock > .title, .literalblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, .sidebarblock > .title, .tableblock > .title, .verseblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title { text-align: left; font-weight: bold; }
.tableblock > caption { text-align: left; font-weight: bold; white-space: nowrap; overflow: visible; max-width: 0; }
table.tableblock #preamble > .sectionbody > .paragraph:first-of-type p { font-size: inherit; }
.admonitionblock > table { border: 0; background: none; width: 100%; }
.admonitionblock > table td.icon { text-align: center; width: 80px; }
.admonitionblock > table td.icon img { max-width: none; }
.admonitionblock > table td.icon .title { font-weight: bold; text-transform: uppercase; }
.admonitionblock > table td.content { padding-left: 1.125em; padding-right: 1.25em; border-left: 1px solid #dddddd; color: #6f6f6f; }
.admonitionblock > table td.content > :last-child > :last-child { margin-bottom: 0; }
.exampleblock > .content { border-style: solid; border-width: 1px; border-color: #e6e6e6; margin-bottom: 1.25em; padding: 1.25em; background: white; -webkit-border-radius: 4px; border-radius: 4px; }
.exampleblock > .content > :first-child { margin-top: 0; }
.exampleblock > .content > :last-child { margin-bottom: 0; }
.exampleblock > .content h1, .exampleblock > .content h2, .exampleblock > .content h3, .exampleblock > .content #toctitle, .sidebarblock.exampleblock > .content > .title, .exampleblock > .content h4, .exampleblock > .content h5, .exampleblock > .content h6, .exampleblock > .content p { color: #333333; }
.exampleblock > .content h1, .exampleblock > .content h2, .exampleblock > .content h3, .exampleblock > .content #toctitle, .sidebarblock.exampleblock > .content > .title, .exampleblock > .content h4, .exampleblock > .content h5, .exampleblock > .content h6 { line-height: 1; margin-bottom: 0.625em; }
.exampleblock > .content h1.subheader, .exampleblock > .content h2.subheader, .exampleblock > .content h3.subheader, .exampleblock > .content .subheader#toctitle, .sidebarblock.exampleblock > .content > .subheader.title, .exampleblock > .content h4.subheader, .exampleblock > .content h5.subheader, .exampleblock > .content h6.subheader { line-height: 1.4; }
.exampleblock.result > .content { -webkit-box-shadow: 0 1px 8px #d9d9d9; box-shadow: 0 1px 8px #d9d9d9; }
.sidebarblock { border-style: solid; border-width: 1px; border-color: #d9d9d9; margin-bottom: 1.25em; padding: 1.25em; background: #f2f2f2; -webkit-border-radius: 4px; border-radius: 4px; }
.sidebarblock > :first-child { margin-top: 0; }
.sidebarblock > :last-child { margin-bottom: 0; }
.sidebarblock h1, .sidebarblock h2, .sidebarblock h3, .sidebarblock #toctitle, .sidebarblock > .content > .title, .sidebarblock h4, .sidebarblock h5, .sidebarblock h6, .sidebarblock p { color: #333333; }
.sidebarblock h1, .sidebarblock h2, .sidebarblock h3, .sidebarblock #toctitle, .sidebarblock > .content > .title, .sidebarblock h4, .sidebarblock h5, .sidebarblock h6 { line-height: 1; margin-bottom: 0.625em; }
.sidebarblock h1.subheader, .sidebarblock h2.subheader, .sidebarblock h3.subheader, .sidebarblock .subheader#toctitle, .sidebarblock > .content > .subheader.title, .sidebarblock h4.subheader, .sidebarblock h5.subheader, .sidebarblock h6.subheader { line-height: 1.4; }
.sidebarblock > .content > .title { color: #7a2518; margin-top: 0; line-height: 1.6; }
.exampleblock > .content > :last-child > :last-child, .exampleblock > .content .olist > ol > li:last-child > :last-child, .exampleblock > .content .ulist > ul > li:last-child > :last-child, .exampleblock > .content .qlist > ol > li:last-child > :last-child, .sidebarblock > .content > :last-child > :last-child, .sidebarblock > .content .olist > ol > li:last-child > :last-child, .sidebarblock > .content .ulist > ul > li:last-child > :last-child, .sidebarblock > .content .qlist > ol > li:last-child > :last-child { margin-bottom: 0; }
.literalblock > .content pre, .listingblock > .content pre { background: none; border-width: 1px 0; border-style: dotted; border-color: #bfbfbf; -webkit-border-radius: 4px; border-radius: 4px; padding: 0.75em 0.75em 0.5em 0.75em; word-wrap: break-word; }
.literalblock > .content pre.nowrap, .listingblock > .content pre.nowrap { overflow-x: auto; white-space: pre; word-wrap: normal; }
.literalblock > .content pre > code, .listingblock > .content pre > code { display: block; }
@media only screen { .literalblock > .content pre, .listingblock > .content pre { font-size: 0.8em; } }
@media only screen and (min-width: 768px) { .literalblock > .content pre, .listingblock > .content pre { font-size: 0.9em; } }
@media only screen and (min-width: 1280px) { .literalblock > .content pre, .listingblock > .content pre { font-size: 1em; } }
.listingblock > .content { position: relative; }
.listingblock:hover code[class*=" language-"]:before { text-transform: uppercase; font-size: 0.9em; color: #999; position: absolute; top: 0.375em; right: 0.375em; }
.listingblock:hover code.asciidoc:before { content: "asciidoc"; }
.listingblock:hover code.clojure:before { content: "clojure"; }
.listingblock:hover code.css:before { content: "css"; }
.listingblock:hover code.groovy:before { content: "groovy"; }
.listingblock:hover code.html:before { content: "html"; }
.listingblock:hover code.java:before { content: "java"; }
.listingblock:hover code.javascript:before { content: "javascript"; }
.listingblock:hover code.python:before { content: "python"; }
.listingblock:hover code.ruby:before { content: "ruby"; }
.listingblock:hover code.scss:before { content: "scss"; }
.listingblock:hover code.xml:before { content: "xml"; }
.listingblock:hover code.yaml:before { content: "yaml"; }
.listingblock.terminal pre .command:before { content: attr(data-prompt); padding-right: 0.5em; color: #999; }
.listingblock.terminal pre .command:not([data-prompt]):before { content: '$'; }
table.pyhltable { border: 0; margin-bottom: 0; }
table.pyhltable td { vertical-align: top; padding-top: 0; padding-bottom: 0; }
table.pyhltable td.code { padding-left: .75em; padding-right: 0; }
.highlight.pygments .lineno, table.pyhltable td:not(.code) { color: #999; padding-left: 0; padding-right: .5em; border-right: 1px solid #dddddd; }
.highlight.pygments .lineno { display: inline-block; margin-right: .25em; }
table.pyhltable .linenodiv { background-color: transparent !important; padding-right: 0 !important; }
.quoteblock { margin: 0 0 1.25em; padding: 0.5625em 1.25em 0 1.1875em; border-left: 1px solid #dddddd; }
.quoteblock blockquote { margin: 0 0 1.25em 0; padding: 0 0 0.5625em 0; border: 0; }
.quoteblock blockquote > .paragraph:last-child p { margin-bottom: 0; }
.quoteblock .attribution { margin-top: -.25em; padding-bottom: 0.5625em; font-size: inherit; color: #555555; }
.quoteblock .attribution br { display: none; }
.quoteblock .attribution cite { display: block; margin-bottom: 0.625em; }
table thead th, table tfoot th { font-weight: bold; }
table.tableblock.grid-all { border-collapse: separate; border-spacing: 1px; -webkit-border-radius: 4px; border-radius: 4px; border-top: 1px solid #dddddd; border-bottom: 1px solid #dddddd; }
table.tableblock.frame-topbot, table.tableblock.frame-none { border-left: 0; border-right: 0; }
table.tableblock.frame-sides, table.tableblock.frame-none { border-top: 0; border-bottom: 0; }
table.tableblock td .paragraph:last-child p, table.tableblock td > p:last-child { margin-bottom: 0; }
th.tableblock.halign-left, td.tableblock.halign-left { text-align: left; }
th.tableblock.halign-right, td.tableblock.halign-right { text-align: right; }
th.tableblock.halign-center, td.tableblock.halign-center { text-align: center; }
th.tableblock.valign-top, td.tableblock.valign-top { vertical-align: top; }
th.tableblock.valign-bottom, td.tableblock.valign-bottom { vertical-align: bottom; }
th.tableblock.valign-middle, td.tableblock.valign-middle { vertical-align: middle; }
p.tableblock.header { color: #222222; font-weight: bold; }
td > div.verse { white-space: pre; }
ol { margin-left: 1.75em; }
ul li ol { margin-left: 1.5em; }
dl dd { margin-left: 1.125em; }
dl dd:last-child, dl dd:last-child > :last-child { margin-bottom: 0; }
ol > li p, ul > li p, ul dd, ol dd, .olist .olist, .ulist .ulist, .ulist .olist, .olist .ulist { margin-bottom: 0.625em; }
ul.unstyled, ol.unnumbered, ul.checklist, ul.none { list-style-type: none; }
ul.unstyled, ol.unnumbered, ul.checklist { margin-left: 0.625em; }
ul.checklist li > p:first-child > i[class^="icon-check"]:first-child, ul.checklist li > p:first-child > input[type="checkbox"]:first-child { margin-right: 0.25em; }
ul.checklist li > p:first-child > input[type="checkbox"]:first-child { position: relative; top: 1px; }
ul.inline { margin: 0 auto 0.625em auto; margin-left: -1.375em; margin-right: 0; padding: 0; list-style: none; overflow: hidden; }
ul.inline > li { list-style: none; float: left; margin-left: 1.375em; display: block; }
ul.inline > li > * { display: block; }
.unstyled dl dt { font-weight: normal; font-style: normal; }
ol.arabic { list-style-type: decimal; }
ol.decimal { list-style-type: decimal-leading-zero; }
ol.loweralpha { list-style-type: lower-alpha; }
ol.upperalpha { list-style-type: upper-alpha; }
ol.lowerroman { list-style-type: lower-roman; }
ol.upperroman { list-style-type: upper-roman; }
ol.lowergreek { list-style-type: lower-greek; }
.hdlist > table, .colist > table { border: 0; background: none; }
.hdlist > table > tbody > tr, .colist > table > tbody > tr { background: none; }
td.hdlist1 { padding-right: .8em; font-weight: bold; }
td.hdlist1, td.hdlist2 { vertical-align: top; }
.literalblock + .colist, .listingblock + .colist { margin-top: -0.5em; }
.colist > table tr > td:first-of-type { padding: 0 .8em; line-height: 1; }
.colist > table tr > td:last-of-type { padding: 0.25em 0; }
.qanda > ol > li > p > em:only-child { color: #00467f; }
.thumb, .th { line-height: 0; display: inline-block; border: solid 4px white; -webkit-box-shadow: 0 0 0 1px #dddddd; box-shadow: 0 0 0 1px #dddddd; }
.imageblock.left, .imageblock[style*="float: left"] { margin: 0.25em 0.625em 1.25em 0; }
.imageblock.right, .imageblock[style*="float: right"] { margin: 0.25em 0 1.25em 0.625em; }
.imageblock > .title { margin-bottom: 0; }
.imageblock.thumb, .imageblock.th { border-width: 6px; }
.imageblock.thumb > .title, .imageblock.th > .title { padding: 0 0.125em; }
.image.left, .image.right { margin-top: 0.25em; margin-bottom: 0.25em; display: inline-block; line-height: 0; }
.image.left { margin-right: 0.625em; }
.image.right { margin-left: 0.625em; }
a.image { text-decoration: none; }
span.footnote, span.footnoteref { vertical-align: super; font-size: 0.875em; }
span.footnote a, span.footnoteref a { text-decoration: none; }
#footnotes { padding-top: 0.75em; padding-bottom: 0.75em; margin-bottom: 0.625em; }
#footnotes hr { width: 20%; min-width: 6.25em; margin: -.25em 0 .75em 0; border-width: 1px 0 0 0; }
#footnotes .footnote { padding: 0 0.375em; line-height: 1.3; font-size: 0.875em; margin-left: 1.2em; text-indent: -1.2em; margin-bottom: .2em; }
#footnotes .footnote a:first-of-type { font-weight: bold; text-decoration: none; }
#footnotes .footnote:last-of-type { margin-bottom: 0; }
#content #footnotes { margin-top: -0.625em; margin-bottom: 0; padding: 0.75em 0; }
.gist .file-data > table { border: none; background: #fff; width: 100%; margin-bottom: 0; }
.gist .file-data > table td.line-data { width: 99%; }
div.unbreakable { page-break-inside: avoid; }
.big { font-size: larger; }
.small { font-size: smaller; }
.underline { text-decoration: underline; }
.overline { text-decoration: overline; }
.line-through { text-decoration: line-through; }
.aqua { color: #00bfbf; }
.aqua-background { background-color: #00fafa; }
.black { color: black; }
.black-background { background-color: black; }
.blue { color: #0000bf; }
.blue-background { background-color: #0000fa; }
.fuchsia { color: #bf00bf; }
.fuchsia-background { background-color: #fa00fa; }
.gray { color: #606060; }
.gray-background { background-color: #7d7d7d; }
.green { color: #006000; }
.green-background { background-color: #007d00; }
.lime { color: #00bf00; }
.lime-background { background-color: #00fa00; }
.maroon { color: #600000; }
.maroon-background { background-color: #7d0000; }
.navy { color: #000060; }
.navy-background { background-color: #00007d; }
.olive { color: #606000; }
.olive-background { background-color: #7d7d00; }
.purple { color: #600060; }
.purple-background { background-color: #7d007d; }
.red { color: #bf0000; }
.red-background { background-color: #fa0000; }
.silver { color: #909090; }
.silver-background { background-color: #bcbcbc; }
.teal { color: #006060; }
.teal-background { background-color: #007d7d; }
.white { color: #bfbfbf; }
.white-background { background-color: #fafafa; }
.yellow { color: #bfbf00; }
.yellow-background { background-color: #fafa00; }
span.icon > [class^="icon-"], span.icon > [class*=" icon-"] { cursor: default; }
.admonitionblock td.icon [class^="icon-"]:before { font-size: 2.5em; text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5); cursor: default; }
.admonitionblock td.icon .icon-note:before { content: "\f05a"; color: #005498; color: #003f72; }
.admonitionblock td.icon .icon-tip:before { content: "\f0eb"; text-shadow: 1px 1px 2px rgba(155, 155, 0, 0.8); color: #111; }
.admonitionblock td.icon .icon-warning:before { content: "\f071"; color: #bf6900; }
.admonitionblock td.icon .icon-caution:before { content: "\f06d"; color: #bf3400; }
.admonitionblock td.icon .icon-important:before { content: "\f06a"; color: #bf0000; }
.conum { display: inline-block; color: white !important; background-color: #222222; -webkit-border-radius: 100px; border-radius: 100px; text-align: center; width: 20px; height: 20px; font-size: 12px; font-weight: bold; line-height: 20px; font-family: Arial, sans-serif; font-style: normal; position: relative; top: -2px; letter-spacing: -1px; }
.conum * { color: white !important; }
.conum + b { display: none; }
.conum:after { content: attr(data-value); }
.conum:not([data-value]):empty { display: none; }
.literalblock > .content > pre, .listingblock > .content > pre { -webkit-border-radius: 0; border-radius: 0; }

</style>
<link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/font-awesome/3.2.1/css/font-awesome.min.css">
<style>
.highlight .hll { background-color: #ffffcc }
.highlight  { background: #ffffff; }
.highlight .tok-c { color: #888888 } /* Comment */
.highlight .tok-err { color: #a61717; background-color: #e3d2d2 } /* Error */
.highlight .tok-k { color: #008800; font-weight: bold } /* Keyword */
.highlight .tok-cm { color: #888888 } /* Comment.Multiline */
.highlight .tok-cp { color: #cc0000; font-weight: bold } /* Comment.Preproc */
.highlight .tok-c1 { color: #888888 } /* Comment.Single */
.highlight .tok-cs { color: #cc0000; font-weight: bold; background-color: #fff0f0 } /* Comment.Special */
.highlight .tok-gd { color: #000000; background-color: #ffdddd } /* Generic.Deleted */
.highlight .tok-ge { font-style: italic } /* Generic.Emph */
.highlight .tok-gr { color: #aa0000 } /* Generic.Error */
.highlight .tok-gh { color: #333333 } /* Generic.Heading */
.highlight .tok-gi { color: #000000; background-color: #ddffdd } /* Generic.Inserted */
.highlight .tok-go { color: #888888 } /* Generic.Output */
.highlight .tok-gp { color: #555555 } /* Generic.Prompt */
.highlight .tok-gs { font-weight: bold } /* Generic.Strong */
.highlight .tok-gu { color: #666666 } /* Generic.Subheading */
.highlight .tok-gt { color: #aa0000 } /* Generic.Traceback */
.highlight .tok-kc { color: #008800; font-weight: bold } /* Keyword.Constant */
.highlight .tok-kd { color: #008800; font-weight: bold } /* Keyword.Declaration */
.highlight .tok-kn { color: #008800; font-weight: bold } /* Keyword.Namespace */
.highlight .tok-kp { color: #008800 } /* Keyword.Pseudo */
.highlight .tok-kr { color: #008800; font-weight: bold } /* Keyword.Reserved */
.highlight .tok-kt { color: #888888; font-weight: bold } /* Keyword.Type */
.highlight .tok-m { color: #0000DD; font-weight: bold } /* Literal.Number */
.highlight .tok-s { color: #dd2200; background-color: #fff0f0 } /* Literal.String */
.highlight .tok-na { color: #336699 } /* Name.Attribute */
.highlight .tok-nb { color: #003388 } /* Name.Builtin */
.highlight .tok-nc { color: #bb0066; font-weight: bold } /* Name.Class */
.highlight .tok-no { color: #003366; font-weight: bold } /* Name.Constant */
.highlight .tok-nd { color: #555555 } /* Name.Decorator */
.highlight .tok-ne { color: #bb0066; font-weight: bold } /* Name.Exception */
.highlight .tok-nf { color: #0066bb; font-weight: bold } /* Name.Function */
.highlight .tok-nl { color: #336699; font-style: italic } /* Name.Label */
.highlight .tok-nn { color: #bb0066; font-weight: bold } /* Name.Namespace */
.highlight .tok-py { color: #336699; font-weight: bold } /* Name.Property */
.highlight .tok-nt { color: #bb0066; font-weight: bold } /* Name.Tag */
.highlight .tok-nv { color: #336699 } /* Name.Variable */
.highlight .tok-ow { color: #008800 } /* Operator.Word */
.highlight .tok-w { color: #bbbbbb } /* Text.Whitespace */
.highlight .tok-mf { color: #0000DD; font-weight: bold } /* Literal.Number.Float */
.highlight .tok-mh { color: #0000DD; font-weight: bold } /* Literal.Number.Hex */
.highlight .tok-mi { color: #0000DD; font-weight: bold } /* Literal.Number.Integer */
.highlight .tok-mo { color: #0000DD; font-weight: bold } /* Literal.Number.Oct */
.highlight .tok-sb { color: #dd2200; background-color: #fff0f0 } /* Literal.String.Backtick */
.highlight .tok-sc { color: #dd2200; background-color: #fff0f0 } /* Literal.String.Char */
.highlight .tok-sd { color: #dd2200; background-color: #fff0f0 } /* Literal.String.Doc */
.highlight .tok-s2 { color: #dd2200; background-color: #fff0f0 } /* Literal.String.Double */
.highlight .tok-se { color: #0044dd; background-color: #fff0f0 } /* Literal.String.Escape */
.highlight .tok-sh { color: #dd2200; background-color: #fff0f0 } /* Literal.String.Heredoc */
.highlight .tok-si { color: #3333bb; background-color: #fff0f0 } /* Literal.String.Interpol */
.highlight .tok-sx { color: #22bb22; background-color: #f0fff0 } /* Literal.String.Other */
.highlight .tok-sr { color: #008800; background-color: #fff0ff } /* Literal.String.Regex */
.highlight .tok-s1 { color: #dd2200; background-color: #fff0f0 } /* Literal.String.Single */
.highlight .tok-ss { color: #aa6600; background-color: #fff0f0 } /* Literal.String.Symbol */
.highlight .tok-bp { color: #003388 } /* Name.Builtin.Pseudo */
.highlight .tok-vc { color: #336699 } /* Name.Variable.Class */
.highlight .tok-vg { color: #dd7700 } /* Name.Variable.Global */
.highlight .tok-vi { color: #3333bb } /* Name.Variable.Instance */
.highlight .tok-il { color: #0000DD; font-weight: bold } /* Literal.Number.Integer.Long */
</style>
</head>
<body class="article toc2 toc-right">
<div id="header">
<h1>OACensus Documentation</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_introduction">Introduction</a></li>
<li><a href="#_the_oacensus_tool">The oacensus Tool</a></li>
<li><a href="#_quickstart">Quickstart</a></li>
<li><a href="#_user_guide">User Guide</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#_config_file_format">Config File Format</a></li>
<li><a href="#_command_line_interface">Command Line Interface</a></li>
<li><a href="#_performance_and_caching">Performance and Caching</a></li>
</ul>
</li>
<li><a href="#_scrapers">Scrapers</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#_open_access_data_sources">Open Access Data Sources</a></li>
<li><a href="#_journal_scrapers">Journal Scrapers</a></li>
<li>
<ul class="sectlevel3">
<li><a href="#_biomedcentral_journals">BiomedCentral journals</a></li>
<li><a href="#_wiley">Wiley</a></li>
<li><a href="#_elsevier">Elsevier</a></li>
<li><a href="#_doaj">DOAJ</a></li>
<li><a href="#_scimago">Scimago</a></li>
</ul>
</li>
<li><a href="#_articles_article_lists">Articles &amp; Article Lists</a></li>
<li>
<ul class="sectlevel3">
<li><a href="#_pubmed_scraper">Pubmed scraper</a></li>
<li><a href="#_doi_list_scraper">DOI List scraper</a></li>
</ul>
</li>
<li><a href="#_article_info">Article Info</a></li>
<li>
<ul class="sectlevel3">
<li><a href="#_open_article_gauge">Open Article Gauge</a></li>
<li><a href="#_crossref">Crossref</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_reports">Reports</a></li>
<li><a href="#_writing_scrapers_and_reports">Writing Scrapers and Reports</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#_orm">ORM</a></li>
<li>
<ul class="sectlevel3">
<li><a href="#_article">Article</a></li>
<li><a href="#_articlelist">ArticleList</a></li>
<li><a href="#_articlelistmembership">ArticleListMembership</a></li>
<li><a href="#_instance">Instance</a></li>
<li><a href="#_journal">Journal</a></li>
<li><a href="#_journallist">JournalList</a></li>
<li><a href="#_journallistmembership">JournalListMembership</a></li>
<li><a href="#_license">License</a></li>
<li><a href="#_licensealias">LicenseAlias</a></li>
<li><a href="#_openmetacommon">OpenMetaCommon</a></li>
<li><a href="#_publisher">Publisher</a></li>
<li><a href="#_rating">Rating</a></li>
<li><a href="#_repository">Repository</a></li>
</ul>
</li>
<li><a href="#_scraper_design">Scraper Design</a></li>
<li><a href="#_report_design">Report Design</a></li>
</ul>
</li>
<li><a href="#_use_cases">Use Cases</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#_institutional_open_access_census">Institutional Open Access Census</a></li>
<li>
<ul class="sectlevel3">
<li><a href="#_user_story">User Story</a></li>
<li><a href="#_pubmed_articles">PubMed Articles</a></li>
<li><a href="#_crossref_articles">CrossRef Articles</a></li>
<li><a href="#_oag_licensing_information">OAG Licensing Information</a></li>
<li><a href="#_doaj_metadata">DOAJ Metadata</a></li>
<li><a href="#_running_the_example">Running the Example</a></li>
</ul>
</li>
<li><a href="#_individual_openness_report">Individual Openness Report</a></li>
<li>
<ul class="sectlevel3">
<li><a href="#_user_story_2">User Story</a></li>
<li><a href="#_implementation">Implementation</a></li>
</ul>
</li>
<li><a href="#_topic_openness_report">Topic Openness Report</a></li>
<li>
<ul class="sectlevel3">
<li><a href="#_user_story_3">User Story</a></li>
</ul>
</li>
<li><a href="#_rcuk_policy_compliance_report">RCUK Policy Compliance Report</a></li>
<li>
<ul class="sectlevel3">
<li><a href="#_user_story_4">User Story</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_introduction">Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This is documentation for the OACensus tool. To jump right in and use the tool,
check out the <a href="#_quickstart">Quickstart</a> section. More detailed documentation is in the
<a href="#_user_guide">User Guide</a>. An overview of all the standard scrapers is in the
<a href="#_scrapers">Scrapers</a> section, and the standard reports are documented in the
<a href="#_reports">Reports</a> section. The <a href="#_writing_scrapers_and_reports">Writing Scrapers and Reports</a> section covers how
to write your own new scrapers and reports. The <a href="#_use_cases">Use Cases</a> section
describes some example scenarios for using this tool.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_oacensus_tool">The oacensus Tool</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The oacensus tool consists of several configurable data scrapers and reporting
tools. It is written in Python.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_quickstart">Quickstart</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Here is an example configuration file named <code>example-orcid.yaml</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code class="yaml language-yaml"><span class="tok-p-Indicator">-</span> <span class="tok-l-Scalar-Plain">orcid</span><span class="tok-p-Indicator">:</span>
    <span class="tok-l-Scalar-Plain">orcid</span><span class="tok-p-Indicator">:</span> <span class="tok-l-Scalar-Plain">0000-0002-0068-716X</span>

<span class="tok-p-Indicator">-</span> <span class="tok-l-Scalar-Plain">oag</span>
</code></pre>
</div>
</div>
<div class="paragraph">
<p>The order in which the scrapers are specified <strong>is</strong> important.</p>
</div>
<div class="paragraph">
<p>This uses the <code>orcid</code> scraper:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code class="console language-console"><span class="tok-gp">$</span> oacensus <span class="tok-nb">help</span> -scraper orcid

<span class="tok-go">orcid Scraper</span>

<span class="tok-go">Generate lists of articles for authors based on ORCID.</span>

<span class="tok-go">Settings:</span>

<span class="tok-go">     cache-expires: Number of units after which to expire cache files. (default value: None)</span>
<span class="tok-go">     cache-expires-units: Unit of time for cache-expires. Options are: years, months, weeks, days, hours, minutes, seconds, microseconds (default value: days)</span>
<span class="tok-go">     encoding: Which encoding to use. Can be &#39;chardet&#39;. (default value: None)</span>
<span class="tok-go">     end-period: Period (month) in yyyy-mm format. (default value: None)</span>
<span class="tok-go">     no-hash-settings: Settings to exclude from hash calculations. (default value: [&#39;start-period&#39;, &#39;end-period&#39;])</span>
<span class="tok-go">     orcid: ORCID of author to process, or a list of ORCIDS. (default value: None)</span>
<span class="tok-go">     orcid-data-file: File to save data under. (default value: orcid.pickle)</span>
<span class="tok-go">     period: Custom setting for article &#39;period&#39;. (default value: manual)</span>
<span class="tok-go">     start-period: Period (month) in yyyy-mm format. (default value: None)</span>
</code></pre>
</div>
</div>
<div class="paragraph">
<p>Followed by the <code>oag</code> scraper:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code class="console language-console"><span class="tok-gp">$</span> oacensus <span class="tok-nb">help</span> -scraper oag

<span class="tok-go">oag Scraper</span>

<span class="tok-go">Adds information from Open Article Gauge (OAG) to articles.</span>

<span class="tok-go">Requests information from the OAG API for each article in the oacensus</span>
<span class="tok-go">database which has a DOI (articles must already be populated from some</span>
<span class="tok-go">other source).</span>

<span class="tok-go">Settings:</span>

<span class="tok-go">     base-url: Base url of OAG API (default value: http://oag.cottagelabs.com/lookup/)</span>
<span class="tok-go">     cache-expires: Number of units after which to expire cache files. (default value: None)</span>
<span class="tok-go">     cache-expires-units: Unit of time for cache-expires. Options are: years, months, weeks, days, hours, minutes, seconds, microseconds (default value: days)</span>
<span class="tok-go">     encoding: Which encoding to use. Can be &#39;chardet&#39;. (default value: None)</span>
<span class="tok-go">     max-items: Maximum number of items in a single API request. (default value: 1000)</span>
<span class="tok-go">     no-hash-settings: Settings to exclude from hash calculations. (default value: [])</span>
<span class="tok-go">     repository-name: Name of OAG repository. (default value: Open Article Gauge)</span>
</code></pre>
</div>
</div>
<div class="paragraph">
<p>This is run via:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code class="console language-console"><span class="tok-gp">$</span> oacensus run --config example-orcid.yaml --reports <span class="tok-s2">&quot;personal-openness&quot;</span>
<span class="tok-go">running orcid scraper</span>
<span class="tok-go">Traceback (most recent call last):</span>
<span class="tok-go">  File &quot;/usr/local/lib/python2.7/dist-packages/modargs/args.py&quot;, line 286, in command_module</span>
<span class="tok-go">    function(**options)</span>
<span class="tok-go">  File &quot;/home/oacensus/oacensus/oacensus/commands.py&quot;, line 191, in run_command</span>
<span class="tok-go">    scraper.run()</span>
<span class="tok-go">  File &quot;/home/oacensus/oacensus/oacensus/scraper.py&quot;, line 105, in run</span>
<span class="tok-go">    return self.process()</span>
<span class="tok-go">  File &quot;/home/oacensus/oacensus/oacensus/scrapers/orcids.py&quot;, line 45, in process</span>
<span class="tok-go">    for pub in response.publications:</span>
<span class="tok-go">  File &quot;/usr/local/lib/python2.7/dist-packages/orcid/rest.py&quot;, line 107, in publications</span>
<span class="tok-go">    self._load_works()</span>
<span class="tok-go">  File &quot;/usr/local/lib/python2.7/dist-packages/orcid/rest.py&quot;, line 101, in _load_works</span>
<span class="tok-go">    + &#39;/orcid-works&#39;, headers = BASE_HEADERS)</span>
<span class="tok-go">TypeError: cannot concatenate &#39;str&#39; and &#39;NoneType&#39; objects</span>
</code></pre>
</div>
</div>
<div class="paragraph">
<p>And a personal openness report is generated:</p>
</div>
<iframe src="report-openness/index.html" style="width: 800px; height: 350px;">
</iframe>
</div>
</div>
<div class="sect1">
<h2 id="_user_guide">User Guide</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>oacensus</code> tool runs scrapers to download and process data, and then runs
reports to present the data. You specify the scrapers in a configuration file,
and reports are specified on the command line.</p>
</div>
<div class="sect2">
<h3 id="_config_file_format">Config File Format</h3>
<div class="paragraph">
<p>Config files are written in YAML and should consist of a list of the scraper
aliases to be run, in order. Each scraper alias may be followed by an optional
dictionary of custom settings to provide to the scraper.</p>
</div>
<div class="paragraph">
<p>Here is an example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code class="yaml language-yaml"><span class="tok-p-Indicator">-</span> <span class="tok-l-Scalar-Plain">orcid</span><span class="tok-p-Indicator">:</span>
    <span class="tok-l-Scalar-Plain">orcid</span><span class="tok-p-Indicator">:</span> <span class="tok-l-Scalar-Plain">0000-0002-0068-716X</span>

<span class="tok-p-Indicator">-</span> <span class="tok-l-Scalar-Plain">oag</span>
</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this case we are running the <code>orcid</code> scraper followed by the <code>oag</code> scraper,
and the <code>orcid</code> scraper has a custom setting specified, confusingly having the
setting name <code>orcid</code>.</p>
</div>
<div class="paragraph">
<p>You can look at the documentation for each scraper to see its available settings.</p>
</div>
</div>
<div class="sect2">
<h3 id="_command_line_interface">Command Line Interface</h3>
<div class="paragraph">
<p>The command line interface is documented via command line help.</p>
</div>
<div class="paragraph">
<p>The output from the <code>help</code> command is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code class="console language-console"><span class="tok-gp">$</span> oacensus <span class="tok-nb">help</span>


<span class="tok-go">Available commands:</span>

<span class="tok-go">  help - Prints this help message or help for individual commands, scrapers or reports.</span>
<span class="tok-go">  list - List all available scrapers and reports.</span>
<span class="tok-go">  run  - Runs the oacensus tool.</span>
<span class="tok-go">  reports - Runs additional reports using data from the last run.</span>

<span class="tok-go">Run `oacensus help -on cmd` for detailed help on any of these commands.</span>
</code></pre>
</div>
</div>
<div class="paragraph">
<p>This lists each of the available commands.</p>
</div>
<div class="paragraph">
<p>Here is detailed help on the <code>run</code> command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code class="console language-console"><span class="tok-gp">$</span> oacensus <span class="tok-nb">help</span> -on run

<span class="tok-go">=======================</span>
<span class="tok-go">Help for &#39;oacensus run&#39;</span>
<span class="tok-go">=======================</span>
<span class="tok-go">   Runs the oacensus scrapers specified in the configuration file.</span>

<span class="tok-go">   This is the main command for using the oacensus tool. It reads the</span>
<span class="tok-go">   configuration specified in YAML and runs the requested scrapers in order</span>
<span class="tok-go">   (using data from the cache if available). Data will be stored in a sqlite3</span>
<span class="tok-go">   database. After data has been processed and stored in the database, reports</span>
<span class="tok-go">   may be run which will present the data.</span>

<span class="tok-go">   Arguments:</span>
<span class="tok-go">      cachedir - Directory to store cached scraped data.</span>
<span class="tok-go">            [optional, defaults to &#39;.oacensus/cache/&#39;]</span>
<span class="tok-go">             e.g. &#39;oacensus run --cachedir .oacensus/cache/&#39;</span>


<span class="tok-go">      config - YAML file to read configuration from.</span>
<span class="tok-go">            [optional, defaults to &#39;oacensus.yaml&#39;]</span>
<span class="tok-go">             e.g. &#39;oacensus run --config oacensus.yaml&#39;</span>


<span class="tok-go">      dbfile - Name of sqlite db file.</span>
<span class="tok-go">            [optional, defaults to &#39;oacensus.sqlite3&#39;]</span>
<span class="tok-go">             e.g. &#39;oacensus run --dbfile oacensus.sqlite3&#39;</span>


<span class="tok-go">      profile - Whether to run in profiler (dev only).</span>
<span class="tok-go">            [optional, defaults to &#39;False&#39;] e.g. &#39;oacensus run --profile False&#39;</span>


<span class="tok-go">      progress - Whether to show progress indicators.</span>
<span class="tok-go">            [optional, defaults to &#39;False&#39;] e.g. &#39;oacensus run --progress False&#39;</span>


<span class="tok-go">      reports - Reports to run.</span>
<span class="tok-go">            [optional, defaults to &#39;&#39;] e.g. &#39;oacensus run --reports &#39;</span>


<span class="tok-go">      workdir - Directory to store temp working directories.</span>
<span class="tok-go">            [optional, defaults to &#39;.oacensus/work/&#39;]</span>
<span class="tok-go">             e.g. &#39;oacensus run --workdir .oacensus/work/&#39;</span>
</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can run reports as part of <code>run</code>, but you can also run reports separately
after you have executed the <code>run</code> command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code class="console language-console"><span class="tok-gp">$</span> oacensus <span class="tok-nb">help</span> -on reports

<span class="tok-go">===========================</span>
<span class="tok-go">Help for &#39;oacensus reports&#39;</span>
<span class="tok-go">===========================</span>
<span class="tok-go">   Arguments:</span>
<span class="tok-go">      dbfile - db file to use for reports</span>
<span class="tok-go">            [optional, defaults to &#39;oacensus.sqlite3&#39;]</span>
<span class="tok-go">             e.g. &#39;oacensus reports --dbfile oacensus.sqlite3&#39;</span>


<span class="tok-go">      reports - reports to run</span>
<span class="tok-go">            [optional, defaults to &#39;&#39;] e.g. &#39;oacensus reports --reports &#39;</span>
</code></pre>
</div>
</div>
<div class="paragraph">
<p>To get a list of available scrapers or reports, use the <code>list</code> command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code class="console language-console"><span class="tok-gp">$</span> oacensus <span class="tok-nb">help</span> -on list

<span class="tok-go">========================</span>
<span class="tok-go">Help for &#39;oacensus list&#39;</span>
<span class="tok-go">========================</span>
<span class="tok-go">   List the available scrapers and reports.</span>
</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here are the built-in scrapers and reports:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code class="console language-console"><span class="tok-gp">$</span> oacensus list
<span class="tok-go">Scrapers:</span>

<span class="tok-go">   articlescraper</span>
<span class="tok-go">   biomed</span>
<span class="tok-go">   crossref</span>
<span class="tok-go">   crossrefjournals</span>
<span class="tok-go">   csvarticles</span>
<span class="tok-go">   demo</span>
<span class="tok-go">   doaj</span>
<span class="tok-go">   doilist</span>
<span class="tok-go">   elsevier</span>
<span class="tok-go">   gtr</span>
<span class="tok-go">   licenses</span>
<span class="tok-go">   oag</span>
<span class="tok-go">   oai</span>
<span class="tok-go">   orcid</span>
<span class="tok-go">   pubmed</span>
<span class="tok-go">   scimago</span>
<span class="tok-go">   wiley</span>

<span class="tok-go">Reports:</span>

<span class="tok-go">   excel</span>
<span class="tok-go">   institution</span>
<span class="tok-go">   personal-openness</span>
<span class="tok-go">   textdump</span>
</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can get help on individual scrapers:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code class="console language-console"><span class="tok-gp">$</span> oacensus <span class="tok-nb">help</span> -scraper oag

<span class="tok-go">oag Scraper</span>

<span class="tok-go">Adds information from Open Article Gauge (OAG) to articles.</span>

<span class="tok-go">Requests information from the OAG API for each article in the oacensus</span>
<span class="tok-go">database which has a DOI (articles must already be populated from some</span>
<span class="tok-go">other source).</span>

<span class="tok-go">Settings:</span>

<span class="tok-go">     base-url: Base url of OAG API (default value: http://oag.cottagelabs.com/lookup/)</span>
<span class="tok-go">     cache-expires: Number of units after which to expire cache files. (default value: None)</span>
<span class="tok-go">     cache-expires-units: Unit of time for cache-expires. Options are: years, months, weeks, days, hours, minutes, seconds, microseconds (default value: days)</span>
<span class="tok-go">     encoding: Which encoding to use. Can be &#39;chardet&#39;. (default value: None)</span>
<span class="tok-go">     max-items: Maximum number of items in a single API request. (default value: 1000)</span>
<span class="tok-go">     no-hash-settings: Settings to exclude from hash calculations. (default value: [])</span>
<span class="tok-go">     repository-name: Name of OAG repository. (default value: Open Article Gauge)</span>
</code></pre>
</div>
</div>
<div class="paragraph">
<p>Or individual reports:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code class="console language-console"><span class="tok-gp">$</span> oacensus <span class="tok-nb">help</span> -report excel

<span class="tok-go">excel Report</span>

<span class="tok-go">Dump all database models to a single excel workbook.</span>

<span class="tok-go">Settings:</span>

<span class="tok-go">     date-format-string: Excel style date format string. (default value: D-MMM-YYYY)</span>
<span class="tok-go">     filename: Name of file to write excel dump to. (default value: dump.xls)</span>
<span class="tok-go">     install-dir: Location where the plugin was defined. (default value: None)</span>
</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_performance_and_caching">Performance and Caching</h3>
<div class="paragraph">
<p>Some scrapers have to fetch a lot of data and will be slow to run. The data
will be cached after the first run and re-used if the parameters are the same.</p>
</div>
<div class="paragraph">
<p>You can use the <code>--progress</code> option to have progress notices printed out while
scrapers run.</p>
</div>
<div class="paragraph">
<p>See also: <a href="https://github.com/ananelson/oacensus/issues/3">https://github.com/ananelson/oacensus/issues/3</a></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_scrapers">Scrapers</h2>
<div class="sectionbody">
<div class="paragraph">
<p>It is up to users to specify scrapers in a sensible order. Some scrapers use
the database state from previously-run scrapers in the current batch to do
their work. The database is reset at the start of each batch run, and entries
will be re-populated from cached or just-downloaded data sources.</p>
</div>
<div class="sect2">
<h3 id="_open_access_data_sources">Open Access Data Sources</h3>
<div class="paragraph">
<p>We can obtain Open Access information at the article or the journal level.</p>
</div>
<div class="paragraph">
<p>Journal-level open access data is obtained by querying a publisher&#8217;s site or an
aggregation service like Directory of Open Access Journals.</p>
</div>
<div class="paragraph">
<p>Article-level open access data is obtained by querying the Open Article Gauge
(OAG).</p>
</div>
<div class="paragraph">
<p>To some extent, obtaining journal level data and then applying that to
individual articles within the oacensus tool is a duplication of the work done
by the OAG, but querying the OAG requires a DOI for each article, and this is
not always available.</p>
</div>
<div class="paragraph">
<p>Article-level open access data is stored in the <code>open_access</code> field in the
Article data model. The <code>is_open_access()</code> method of an Article object will use
both the <code>open_access</code> field on the Article object and the <code>open_access</code> field
on the associated Journal object (if any) to determine the openness of the
article.</p>
</div>
</div>
<div class="sect2">
<h3 id="_journal_scrapers">Journal Scrapers</h3>
<div class="paragraph">
<p>Journal scrapers should typically be run first in most workflows.</p>
</div>
<div class="paragraph">
<p>The <code>JournalScraper</code> class implements a <code>create_or_modify_journal</code> method which
should be used as the standard method to add new journal entries. This method
looks for an existing journal having the ISSN and, if it finds it, it modifies
the existing entry with only those fields specified in <code>update_journal_fields</code>.
If there is not an existing journal corresponding to the ISSN, all provided
data fields are used to create a new journal entry. If a JournalList is
provided, the created or modified journal is added to that list (journals can
be linked to multiple journal lists).</p>
</div>
<div class="paragraph">
<p>If the desired behavior is to only modify existing journals, then the
<code>add-new-journals</code> setting can be set to False.</p>
</div>
<div class="paragraph">
<p>Unless this paradigm does not fit, the preferred method is to use
<code>create_or_modify_journal</code> rather than using the <code>Journal.create</code> method
directly.</p>
</div>
<div class="paragraph">
<p>Don&#8217;t forget to specify <code>update_journal_fields</code> for each JournalScraper so that
oacensus knows how to handle journals which already exist. The default is an
empty list meaning that no data will be updated.</p>
</div>
<div class="sect3">
<h4 id="_biomedcentral_journals">BiomedCentral journals</h4>
<div class="paragraph">
<p>The <code>biomed</code> scraper creates a Journal entry for each journal published by BioMed Central.</p>
</div>
</div>
<div class="sect3">
<h4 id="_wiley">Wiley</h4>
<div class="paragraph">
<p>Creates Journal entry for each journal published by Wiley.</p>
</div>
</div>
<div class="sect3">
<h4 id="_elsevier">Elsevier</h4>
<div class="paragraph">
<p>Creates Journal entry for each journal published by Elsevier.</p>
</div>
</div>
<div class="sect3">
<h4 id="_doaj">DOAJ</h4>
<div class="paragraph">
<p>Gets information about open access journals from DOAJ, using new website&#8217;s CSV download option.</p>
</div>
</div>
<div class="sect3">
<h4 id="_scimago">Scimago</h4>
<div class="paragraph">
<p>Not complete. Returns Scimago journal ranking information.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_articles_article_lists">Articles &amp; Article Lists</h3>
<div class="paragraph">
<p>Here are scrapers which create article entries, sometimes organized into lists.</p>
</div>
<div class="paragraph">
<p>Where possible, articles are assigned to journals by linking on the journal ISSN.</p>
</div>
<div class="sect3">
<h4 id="_pubmed_scraper">Pubmed scraper</h4>
<div class="paragraph">
<p>The Pubmed scraper obtains articles returned from a search of Pubmed.</p>
</div>
</div>
<div class="sect3">
<h4 id="_doi_list_scraper">DOI List scraper</h4>
<div class="paragraph">
<p>Creates articles from an external list of DOIs.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_article_info">Article Info</h3>
<div class="paragraph">
<p>Scrapers which add information to existing article entries.</p>
</div>
<div class="sect3">
<h4 id="_open_article_gauge">Open Article Gauge</h4>
<div class="paragraph">
<p>This scraper updates open access-related attributes for an article using data
retrieved from the OAG API.</p>
</div>
</div>
<div class="sect3">
<h4 id="_crossref">Crossref</h4>
<div class="paragraph">
<p>Obtain information from Crossref for all articles having a DOI.</p>
</div>
<div class="paragraph">
<p>Currently, this scraper does not modify any data.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_reports">Reports</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Built-in reports.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_writing_scrapers_and_reports">Writing Scrapers and Reports</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Scrapers and reports are implemented using the
<a href="http://dexy.github.io/cashew/">cashew plugin system</a>.</p>
</div>
<div class="paragraph">
<p>If you implement a custom scraper or report, make sure to add an import statement in the
<a href="https://github.com/ananelson/oacensus/blob/master/oacensus/load_plugins.py">load
plugins module</a> so that Cashew will register the plugin.</p>
</div>
<div class="sect2">
<h3 id="_orm">ORM</h3>
<div class="paragraph">
<p>Oacensus uses the <a href="http://peewee.readthedocs.org/">peewee ORM</a>.</p>
</div>
<div class="sect3">
<h4 id="_article">Article</h4>
<div class="paragraph">
<p>Fields:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>date_published</strong> <em>Date on which article was published.</em></p>
</li>
<li>
<p><strong>doi</strong> <em>Digital object identifier for article.</em></p>
</li>
<li>
<p><strong>id</strong></p>
</li>
<li>
<p><strong>journal</strong> <em>Journal object for journal in which article was published.</em></p>
</li>
<li>
<p><strong>period</strong> <em>Name of date-based period in which this article was scraped.</em></p>
</li>
<li>
<p><strong>source</strong> <em>Which scraper populated this information?</em></p>
</li>
<li>
<p><strong>title</strong> <em>Title of article.</em></p>
</li>
<li>
<p><strong>url</strong> <em>Web page for article information.</em></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_articlelist">ArticleList</h4>
<div class="paragraph">
<p>Fields:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>id</strong></p>
</li>
<li>
<p><strong>name</strong></p>
</li>
<li>
<p><strong>orcid</strong></p>
</li>
<li>
<p><strong>source</strong> <em>Which scraper populated this information?</em></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_articlelistmembership">ArticleListMembership</h4>
<div class="paragraph">
<p>Fields:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>article</strong></p>
</li>
<li>
<p><strong>article_list</strong></p>
</li>
<li>
<p><strong>id</strong></p>
</li>
<li>
<p><strong>source</strong> <em>Which scraper populated this information?</em></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_instance">Instance</h4>
<div class="paragraph">
<p>Fields:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>article</strong></p>
</li>
<li>
<p><strong>download_url</strong> <em>URL for directly downloading the article. May be tested for status and file size.</em></p>
</li>
<li>
<p><strong>end_date</strong> <em>This rating&#8217;s properties are in effect up to this date.</em></p>
</li>
<li>
<p><strong>expected_file_hash</strong> <em>Expected file checksum if article is downloadable.</em></p>
</li>
<li>
<p><strong>expected_file_size</strong> <em>Expected file size if article is downloadable.</em></p>
</li>
<li>
<p><strong>free_to_read</strong> <em>Are journal contents available online for free?</em></p>
</li>
<li>
<p><strong>id</strong></p>
</li>
<li>
<p><strong>identifier</strong> <em>Identifier within the repository.</em></p>
</li>
<li>
<p><strong>info_url</strong> <em>For convenience, URL of an info page for the article.</em></p>
</li>
<li>
<p><strong>license</strong></p>
</li>
<li>
<p><strong>repository</strong> <em>Repository in which this instance is deposited or described.</em></p>
</li>
<li>
<p><strong>source</strong> <em>Which scraper populated this information?</em></p>
</li>
<li>
<p><strong>start_date</strong> <em>This rating&#8217;s properties are in effect commencing from this date.</em></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_journal">Journal</h4>
<div class="paragraph">
<p>Fields:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>country</strong> <em>Country of publication for this journal.</em></p>
</li>
<li>
<p><strong>doi</strong> <em>DOI for journal.</em></p>
</li>
<li>
<p><strong>eissn</strong> <em>Electronic ISSN (EISSN) of journal.</em></p>
</li>
<li>
<p><strong>id</strong></p>
</li>
<li>
<p><strong>iso_abbreviation</strong></p>
</li>
<li>
<p><strong>issn</strong> <em>ISSN of journal.</em> [unique]</p>
</li>
<li>
<p><strong>issn_linking</strong></p>
</li>
<li>
<p><strong>language</strong> <em>Language(s) in which journal is published.</em></p>
</li>
<li>
<p><strong>medline_ta</strong></p>
</li>
<li>
<p><strong>nlm_unique_id</strong></p>
</li>
<li>
<p><strong>publisher</strong> <em>Publisher object corresponding to journal publisher.</em></p>
</li>
<li>
<p><strong>source</strong> <em>Which scraper populated this information?</em></p>
</li>
<li>
<p><strong>subject</strong> <em>Subject area which this journal deals with.</em></p>
</li>
<li>
<p><strong>title</strong> <em>Name of journal.</em></p>
</li>
<li>
<p><strong>url</strong> <em>Website of journal.</em></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_journallist">JournalList</h4>
<div class="paragraph">
<p>Fields:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>id</strong></p>
</li>
<li>
<p><strong>name</strong></p>
</li>
<li>
<p><strong>source</strong> <em>Which scraper populated this information?</em></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_journallistmembership">JournalListMembership</h4>
<div class="paragraph">
<p>Fields:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>id</strong></p>
</li>
<li>
<p><strong>journal</strong></p>
</li>
<li>
<p><strong>journal_list</strong></p>
</li>
<li>
<p><strong>source</strong> <em>Which scraper populated this information?</em></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_license">License</h4>
<div class="paragraph">
<p>Fields:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>alias</strong></p>
</li>
<li>
<p><strong>id</strong></p>
</li>
<li>
<p><strong>source</strong> <em>Which scraper populated this information?</em></p>
</li>
<li>
<p><strong>title</strong></p>
</li>
<li>
<p><strong>url</strong></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_licensealias">LicenseAlias</h4>
<div class="paragraph">
<p>Fields:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>alias</strong>  [unique]</p>
</li>
<li>
<p><strong>id</strong></p>
</li>
<li>
<p><strong>license</strong></p>
</li>
<li>
<p><strong>source</strong> <em>Which scraper populated this information?</em></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_openmetacommon">OpenMetaCommon</h4>
<div class="paragraph">
<p>Fields:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>end_date</strong> <em>This rating&#8217;s properties are in effect up to this date.</em></p>
</li>
<li>
<p><strong>free_to_read</strong> <em>Are journal contents available online for free?</em></p>
</li>
<li>
<p><strong>id</strong></p>
</li>
<li>
<p><strong>license</strong></p>
</li>
<li>
<p><strong>source</strong> <em>Which scraper populated this information?</em></p>
</li>
<li>
<p><strong>start_date</strong> <em>This rating&#8217;s properties are in effect commencing from this date.</em></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_publisher">Publisher</h4>
<div class="paragraph">
<p>Fields:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>id</strong></p>
</li>
<li>
<p><strong>name</strong></p>
</li>
<li>
<p><strong>source</strong> <em>Which scraper populated this information?</em></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_rating">Rating</h4>
<div class="paragraph">
<p>Fields:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>end_date</strong> <em>This rating&#8217;s properties are in effect up to this date.</em></p>
</li>
<li>
<p><strong>free_to_read</strong> <em>Are journal contents available online for free?</em></p>
</li>
<li>
<p><strong>id</strong></p>
</li>
<li>
<p><strong>journal</strong></p>
</li>
<li>
<p><strong>license</strong></p>
</li>
<li>
<p><strong>source</strong> <em>Which scraper populated this information?</em></p>
</li>
<li>
<p><strong>start_date</strong> <em>This rating&#8217;s properties are in effect commencing from this date.</em></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_repository">Repository</h4>
<div class="paragraph">
<p>Fields:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>id</strong></p>
</li>
<li>
<p><strong>info_url</strong> <em>For convenience, URL of info page for the repository.</em></p>
</li>
<li>
<p><strong>name</strong> <em>Descriptive name for the repository.</em></p>
</li>
<li>
<p><strong>source</strong> <em>Which scraper populated this information?</em></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_scraper_design">Scraper Design</h3>
<div class="paragraph">
<p>Scrapers work in two phases. The first phase is <code>scrape</code> and the second phase
is <code>process</code>. Results of the <code>scrape</code> phase are cached and, if no parameters have
changed, re-used in subsequent calls. The <code>scrape</code> phase should do as much
pre-processing as possible (for efficiency) but they should not do anything
that depends on database state or on the ordering of scrapers. Anything which
depends on state should occur in the <code>process</code> phase which is not cached.</p>
</div>
</div>
<div class="sect2">
<h3 id="_report_design">Report Design</h3>
<div class="paragraph">
<p>Reports take the harvested data and present it. Reports can be of any format.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_use_cases">Use Cases</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_institutional_open_access_census">Institutional Open Access Census</h3>
<div class="sect3">
<h4 id="_user_story">User Story</h4>
<div class="paragraph">
<p>A librarian at Oxford University wishes to understand the amount of Open Access
content, as defined in different ways, in the research they publish. They first
need to create a list of research articles published from Oxford University.
They use PubMed and CrossRef as sources of articles that provide affiliation
information to generate the list of article DOIs. For each article they then
wish to ask: a) Is this in an Open Access Journal (using DOAJ) b) Does the
article have an open license (OAG) and c) Is the article in one of the
following repositories (PMC/EuropePMC, OpenAIRE, the Oxford Institutional
repository[1]). They aim to provide a report on this once a month.</p>
</div>
<div class="paragraph">
<p>[1] Most IRs can be searched via a standard protocol OAI-PMH. It would be
reasonable to ask the user to supply the appropriate URL for the API endpoint</p>
</div>
</div>
<div class="sect3">
<h4 id="_pubmed_articles">PubMed Articles</h4>
<div class="paragraph">
<p>We&#8217;ll retrieve a list of articles where the affiliation is Oxford University.</p>
</div>
<div class="paragraph">
<p>To determine how to configure the pubmed query, we first review the docs for
the <code>pubmed</code> scraper:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code class="console language-console"><span class="tok-gp">$</span> oacensus <span class="tok-nb">help</span> -scraper pubmed

<span class="tok-go">pubmed Scraper</span>

<span class="tok-go">Creates a single ArticleList and individual Article objects for all</span>
<span class="tok-go">articles returned from pubmed matching the [required] search query.</span>

<span class="tok-go">Settings:</span>

<span class="tok-go">     base-url: Base url of API. (default value: http://eutils.ncbi.nlm.nih.gov/entrez/eutils/)</span>
<span class="tok-go">     cache-expires: Number of units after which to expire cache files. (default value: None)</span>
<span class="tok-go">     cache-expires-units: Unit of time for cache-expires. Options are: years, months, weeks, days, hours, minutes, seconds, microseconds (default value: days)</span>
<span class="tok-go">     datetype: Type of date for period filtering (default value: pdat)</span>
<span class="tok-go">     delay: Time in seconds to delay between API requests. (default value: 1)</span>
<span class="tok-go">     encoding: Which encoding to use. Can be &#39;chardet&#39;. (default value: None)</span>
<span class="tok-go">     end-period: Period (month) in yyyy-mm format. (default value: None)</span>
<span class="tok-go">     filepattern: Names of files which hold data in cache. (default value: data_%04d.xml)</span>
<span class="tok-go">     initial-ret-max: Maximum number of entries to return in the initial query. (default value: 5)</span>
<span class="tok-go">     ncbi-db: Name of NCBI database to query. (default value: pubmed)</span>
<span class="tok-go">     no-hash-settings: Settings to exclude from hash calculations. (default value: [&#39;start-period&#39;, &#39;end-period&#39;])</span>
<span class="tok-go">     ret-max: Maximum number of entries to return in any single query. (default value: 10000)</span>
<span class="tok-go">     search: Search query to include. (default value: None)</span>
<span class="tok-go">     start-period: Period (month) in yyyy-mm format. (default value: None)</span>
</code></pre>
</div>
</div>
<div class="paragraph">
<p>We only need to specify the <code>search</code> parameter:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code class="yaml language-yaml"><span class="tok-p-Indicator">-</span> <span class="tok-l-Scalar-Plain">pubmed</span><span class="tok-p-Indicator">:</span>
    <span class="tok-l-Scalar-Plain">search</span><span class="tok-p-Indicator">:</span> <span class="tok-s">&#39;&quot;Oxford</span><span class="tok-nv"> </span><span class="tok-s">University&quot;[affiliation]</span><span class="tok-nv"> </span><span class="tok-s">AND</span><span class="tok-nv"> </span><span class="tok-s">2012[pdat]&#39;</span>
</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_crossref_articles">CrossRef Articles</h4>
<div class="paragraph">
<p>TBD.</p>
</div>
</div>
<div class="sect3">
<h4 id="_oag_licensing_information">OAG Licensing Information</h4>
<div class="paragraph">
<p>The OAG scraper retrieves OAG metadata for any article in the database which has a DOI:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code class="console language-console"><span class="tok-gp">$</span> oacensus <span class="tok-nb">help</span> -scraper oag

<span class="tok-go">oag Scraper</span>

<span class="tok-go">Adds information from Open Article Gauge (OAG) to articles.</span>

<span class="tok-go">Requests information from the OAG API for each article in the oacensus</span>
<span class="tok-go">database which has a DOI (articles must already be populated from some</span>
<span class="tok-go">other source).</span>

<span class="tok-go">Settings:</span>

<span class="tok-go">     base-url: Base url of OAG API (default value: http://oag.cottagelabs.com/lookup/)</span>
<span class="tok-go">     cache-expires: Number of units after which to expire cache files. (default value: None)</span>
<span class="tok-go">     cache-expires-units: Unit of time for cache-expires. Options are: years, months, weeks, days, hours, minutes, seconds, microseconds (default value: days)</span>
<span class="tok-go">     encoding: Which encoding to use. Can be &#39;chardet&#39;. (default value: None)</span>
<span class="tok-go">     max-items: Maximum number of items in a single API request. (default value: 1000)</span>
<span class="tok-go">     no-hash-settings: Settings to exclude from hash calculations. (default value: [])</span>
<span class="tok-go">     repository-name: Name of OAG repository. (default value: Open Article Gauge)</span>
</code></pre>
</div>
</div>
<div class="paragraph">
<p>We don&#8217;t need to set any parameters:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code class="yaml language-yaml"><span class="tok-p-Indicator">-</span> <span class="tok-l-Scalar-Plain">oag</span>
</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_doaj_metadata">DOAJ Metadata</h4>
<div class="paragraph">
<p>The <code>doaj</code> scraper fetches the full listing of open access journals from DOAJ.</p>
</div>
<div class="paragraph">
<p>Then, any journals in the database matching DOAJ ISSNs are updated with DOAJ
information about openness and license information.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code class="console language-console"><span class="tok-gp">$</span> oacensus <span class="tok-nb">help</span> -scraper doaj

<span class="tok-go">doaj Scraper</span>

<span class="tok-go">Generates ratings for journals with openness information from DOAJ.</span>

<span class="tok-go">Settings:</span>

<span class="tok-go">     add-new-journals: Whether to create new Journal instances if one doesn&#39;t already exist. (default value: True)</span>
<span class="tok-go">     cache-expires: Number of units after which to expire cache files. (default value: 90)</span>
<span class="tok-go">     cache-expires-units: Unit of time for cache-expires. Options are: years, months, weeks, days, hours, minutes, seconds, microseconds (default value: days)</span>
<span class="tok-go">     csv-url: Base url for accessing DOAJ. (default value: http://www.doaj.org/csv)</span>
<span class="tok-go">     data-file: File to save data under. (default value: doaj.csv)</span>
<span class="tok-go">     encoding: Which encoding to use. Can be &#39;chardet&#39;. (default value: utf-8)</span>
<span class="tok-go">     limit: Limit of journals to process (for testing/dev) (default value: None)</span>
<span class="tok-go">     no-hash-settings: Settings to exclude from hash calculations. (default value: [])</span>
<span class="tok-go">     update-journal-fields: Whitelist of fields which should be applied when updating an existing journal. (default value: [])</span>
</code></pre>
</div>
</div>
<div class="paragraph">
<p>We don&#8217;t need to set any parameters:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code class="yaml language-yaml"><span class="tok-p-Indicator">-</span> <span class="tok-l-Scalar-Plain">doaj</span>
</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_running_the_example">Running the Example</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code class="console language-console"><span class="tok-gp">$</span> oacensus run --config example-oxford-2012.yaml --reports excel
<span class="tok-go">running pubmed scraper</span>
<span class="tok-go">Traceback (most recent call last):</span>
<span class="tok-go">  File &quot;/usr/local/bin/oacensus&quot;, line 9, in &lt;module&gt;</span>
<span class="tok-go">    load_entry_point(&#39;oacensus==0.1.0d&#39;, &#39;console_scripts&#39;, &#39;oacensus&#39;)()</span>
<span class="tok-go">  File &quot;/home/oacensus/oacensus/oacensus/commands.py&quot;, line 27, in run</span>
<span class="tok-go">    args.parse_and_run_command(sys.argv[1:], mod, default_command=default_cmd)</span>
<span class="tok-go">  File &quot;/usr/local/lib/python2.7/dist-packages/modargs/args.py&quot;, line 381, in parse_and_run_command</span>
<span class="tok-go">    command_module(mod, command, options, cli_options=cli_options)</span>
<span class="tok-go">  File &quot;/usr/local/lib/python2.7/dist-packages/modargs/args.py&quot;, line 286, in command_module</span>
<span class="tok-go">    function(**options)</span>
<span class="tok-go">  File &quot;/home/oacensus/oacensus/oacensus/commands.py&quot;, line 191, in run_command</span>
<span class="tok-go">    scraper.run()</span>
<span class="tok-go">  File &quot;/home/oacensus/oacensus/oacensus/scraper.py&quot;, line 97, in run</span>
<span class="tok-go">    self.scrape()</span>
<span class="tok-go">  File &quot;/home/oacensus/oacensus/oacensus/scraper.py&quot;, line 294, in scrape</span>
<span class="tok-go">    for start_date, end_date in self.periods():</span>
<span class="tok-go">  File &quot;/home/oacensus/oacensus/oacensus/scraper.py&quot;, line 245, in periods</span>
<span class="tok-go">    for i, start_date in enumerate(self.start_dates()):</span>
<span class="tok-go">  File &quot;/home/oacensus/oacensus/oacensus/scraper.py&quot;, line 228, in start_dates</span>
<span class="tok-go">    start_month = self.parse_month(&quot;start-period&quot;)</span>
<span class="tok-go">  File &quot;/home/oacensus/oacensus/oacensus/scraper.py&quot;, line 215, in parse_month</span>
<span class="tok-go">    raise Exception(&quot;%s must be provided in YYYY-MM format&quot; % param_name)</span>
<span class="tok-go">Exception: start-period must be provided in YYYY-MM format</span>
</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>excel</code> report dumps each database table onto an excel worksheet for inspection.</p>
</div>
<div class="paragraph">
<p><a href="dump.xls">Excel Report</a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_individual_openness_report">Individual Openness Report</h3>
<div class="sect3">
<h4 id="_user_story_2">User Story</h4>
<div class="paragraph">
<p>A researcher wishes to provide a report demonstrating that they are a good
citizen in generating open content. They use their ORCID profile as a source of
article information. For each article they wish to show that it is either
available at the publisher website freely to read[2] or is in either PMC or
their institutional repository.</p>
</div>
<div class="paragraph">
<p>[2] "free-to-read" is a metadata element that Crossref will be shortly rolling
out. It doesn&#8217;t yet exist and will take some time to reach critical mass.</p>
</div>
</div>
<div class="sect3">
<h4 id="_implementation">Implementation</h4>
<div class="paragraph">
<p>For now this report is implementing just using OAG openness data.</p>
</div>
<div class="paragraph">
<p>Here is the full project configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code class="yaml language-yaml"><span class="tok-p-Indicator">-</span> <span class="tok-l-Scalar-Plain">orcid</span><span class="tok-p-Indicator">:</span>
    <span class="tok-l-Scalar-Plain">orcid</span><span class="tok-p-Indicator">:</span> <span class="tok-l-Scalar-Plain">0000-0002-0068-716X</span>

<span class="tok-p-Indicator">-</span> <span class="tok-l-Scalar-Plain">oag</span>
</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here is the run output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code class="console language-console"><span class="tok-gp">$</span> oacensus run --config example-orcid.yaml --reports <span class="tok-s2">&quot;personal-openness&quot;</span>
<span class="tok-go">running orcid scraper</span>
<span class="tok-go">Traceback (most recent call last):</span>
<span class="tok-go">  File &quot;/usr/local/lib/python2.7/dist-packages/modargs/args.py&quot;, line 286, in command_module</span>
<span class="tok-go">    function(**options)</span>
<span class="tok-go">  File &quot;/home/oacensus/oacensus/oacensus/commands.py&quot;, line 191, in run_command</span>
<span class="tok-go">    scraper.run()</span>
<span class="tok-go">  File &quot;/home/oacensus/oacensus/oacensus/scraper.py&quot;, line 105, in run</span>
<span class="tok-go">    return self.process()</span>
<span class="tok-go">  File &quot;/home/oacensus/oacensus/oacensus/scrapers/orcids.py&quot;, line 45, in process</span>
<span class="tok-go">    for pub in response.publications:</span>
<span class="tok-go">  File &quot;/usr/local/lib/python2.7/dist-packages/orcid/rest.py&quot;, line 107, in publications</span>
<span class="tok-go">    self._load_works()</span>
<span class="tok-go">  File &quot;/usr/local/lib/python2.7/dist-packages/orcid/rest.py&quot;, line 101, in _load_works</span>
<span class="tok-go">    + &#39;/orcid-works&#39;, headers = BASE_HEADERS)</span>
<span class="tok-go">TypeError: cannot concatenate &#39;str&#39; and &#39;NoneType&#39; objects</span>
</code></pre>
</div>
</div>
<div class="paragraph">
<p>And here is the resulting report:</p>
</div>
<iframe src="report-openness/index.html" style="width: 800px; height: 350px;">
</iframe>
</div>
</div>
<div class="sect2">
<h3 id="_topic_openness_report">Topic Openness Report</h3>
<div class="sect3">
<h4 id="_user_story_3">User Story</h4>
<div class="paragraph">
<p>A patient advocate wants to understand how much content related to their
disease is available. They search PubMed to identify a set of articles and a
comparison set for a different disease. They then wish to know what proportion
of articles are free to read via the publisher[2], available in PubMedCentral,
and available openly licensed.</p>
</div>
<div class="paragraph">
<p>[2] "free-to-read" is a metadata element that Crossref will be shortly rolling
out. It doesn&#8217;t yet exist and will take some time to reach critical mass.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_rcuk_policy_compliance_report">RCUK Policy Compliance Report</h3>
<div class="sect3">
<h4 id="_user_story_4">User Story</h4>
<div class="paragraph">
<p>A UK funder wishes to report on RCUK policy compliance. They use Gateway to
Research to generate a list of publications relating to their funding.
Compliance is provided via two routes. If the article is OA through the
publisher website it must have a CC BY license (OAG) or it must be made
available through a repository. The funder elects to search PMC, OpenAIRE, and
a UK federated institutional repository search tool[3] to identify copies in
repositories.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2014-05-13 19:54:08 UTC
</div>
</div>
</body>
</html>